<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Applied Physiology and Pharmacology MCQs</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 14px;
            color: #666;
        }
        /* Style for the new overall progress bar */
        .progress-bar-container {
            margin-bottom: 20px;
        }
        #overall-progress-text {
            text-align: center;
            margin-bottom: 5px;
            font-size: 14px;
            color: #666;
        }
        #overall-progress-bar {
            width: 100%;
            height: 15px;
            background-color: #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }
        #overall-progress-fill {
            height: 100%;
            background-color: #48bb78; /* Green color for progress */
            border-radius: 8px;
            transition: width 0.5s ease-in-out;
        }


        .question {
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        .option {
            padding: 12px 15px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option:hover {
            background-color: #e9ecef;
        }
        .option.selected {
            background-color: #4299e1;
            color: white;
            border-color: #4299e1;
        }
        .option.correct {
            background-color: #48bb78;
            color: white;
            border-color: #48bb78;
        }
        .option.incorrect {
            background-color: #f56565;
            color: white;
            border-color: #f56565;
        }
         /* Style for selected incorrect answers in results */
         .option.selected.incorrect {
             background-color: #f56565; /* Red background */
             color: white;
             border-color: #f56565;
         }
          /* Style for correct answers in results when user was wrong */
         .option.correct:not(.selected) {
             background-color: #d4edda; /* Light green */
             color: #155724; /* Dark green text */
             border-color: #c3e6cb;
         }


        .controls {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #4299e1;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #3182ce;
        }
        button:disabled {
            background-color: #a0aec0;
            cursor: not-allowed;
        }
        .results {
            display: none;
        }
        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 5px;
        }
        .result-item.correct {
            background-color: rgba(72, 187, 120, 0.1);
            border-left: 4px solid #48bb78;
        }
        .result-item.incorrect {
            background-color: rgba(245, 101, 101, 0.1);
            border-left: 4px solid #f56565;
        }
         /* New style for unanswered questions in the results list */
         .result-item.unanswered {
             background-color: rgba(160, 174, 192, 0.1);
             border-left: 4px solid #a0aec0;
         }

        .stats {
            background-color: #ebf8ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
        .stats span {
            font-weight: bold;
            color: #2b6cb0;
        }
        /* Style for contents list */
        #contents-list-container {
            margin-top: 40px;
        }
        #contents-list {
            list-style: none;
            padding: 0;
        }
        #contents-list li {
            margin-bottom: 8px;
            padding: 12px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #contents-list li:hover {
             background-color: #e9ecef;
        }
        #contents-list li strong {
            color: #2c3e50;
        }
         #contents-list li span {
             font-weight: bold;
             color: #2b6cb0;
         }
         /* Style for Reset button */
        #reset-quiz-button {
            background-color: #e53e3e; /* Red color */
            border-color: #e53e3e;
            margin-top: 40px;
        }
         #reset-quiz-button:hover {
             background-color: #c53030;
         }

         /* Style for overall completion message */
         #overall-completion-message .stats {
            background-color: #ebf8ff; /* Same as section stats */
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
         #overall-completion-message .stats span {
            font-weight: bold;
            color: #2b6cb0; /* Same as section stats */
         }

    </style>
</head>
<body>
    <div class="container">
        <h1>Applied Physiology & Pharmacology MCQs</h1>

        <!-- New: Overall Progress Bar -->
        <div class="progress-bar-container">
            <div id="overall-progress-text">Overall Progress: 0% (0 / 0)</div>
            <div id="overall-progress-bar">
                <div id="overall-progress-fill"></div>
            </div>
        </div>

        <div id="quiz-container">
            <div class="progress-bar">
                <div id="section-info">Section: <span id="current-section"></span></div>
                <div id="question-progress">Question <span id="current-question"></span> of <span id="total-questions"></span></div>
            </div>

            <div class="question" id="question-text"></div>

            <div class="options" id="options-container"></div>

            <div class="controls">
                <button id="back-button" disabled>Back</button>
                <button id="next-button" disabled>Next Question</button>
            </div>
        </div>

        <div id="results-container" class="results">
            <h2>Section Results</h2>

            <div class="stats">
                You scored <span id="correct-count"></span> out of <span id="question-count"></span>
                (<span id="percentage"></span>%)
            </div>

            <div id="results-list"></div>

            <div class="controls">
                <button id="next-section-button">Next Section</button>
            </div>
        </div>

        <!-- New: Overall Completion Message -->
        <div id="overall-completion-message" class="results">
             <h2>Quiz Completed!</h2>
             <p>You have completed all sections of the quiz.</p>
             <div class="stats" id="overall-stats-container">
                 <!-- Overall stats generated here -->
             </div>
             <div class="controls" style="justify-content: center;">
                  <button id="overall-restart-button" style="margin-top: 20px;">Restart Quiz</button>
             </div>
         </div>


        <!-- New: Contents List -->
        <div id="contents-list-container">
            <h2>Contents</h2>
            <ul id="contents-list">
                <!-- List items dynamically generated here -->
            </ul>
        </div>

        <!-- New: Reset Button -->
        <div style="text-align: center; margin-top: 40px;">
            <button id="reset-quiz-button">Reset All Data</button>
        </div>

    </div> <!-- Close container -->

    <script>
        // Parse the MCQ data from the PDF
                // All quiz data extracted from the provided OCR text
        // DO NOT POPULATE QUIZDATA HERE - ASSUME IT IS DEFINED BEFORE THIS SCRIPT BLOCK
        // Example structure (content omitted as per instruction):
        // const quizData = [ { title: "Section 1", questions: [...] }, ... ];
        
        const quizData = [
            {
                title: "ELECTROLYTES AND FLUID BALANCE",
                questions: [
                    {
                        question: "Which hormone is primarily responsible for regulating body fluid osmolarity?",
                        options: [
                            "A) Aldosterone",
                            "B) Renin",
                            "C) Atrial natriuretic peptide",
                            "D) Antidiuretic hormone (ADH)",
                            "E) Angiotensin II"
                        ],
                        answer: "D) Antidiuretic hormone (ADH)"
                    },
                    {
                        question: "Which of the following is the primary mechanism for regulating body fluid volume?",
                        options: [
                            "A) Alterations in water balance",
                            "B) Alterations in potassium balance",
                            "C) Alterations in sodium balance",
                            "D) Alterations in calcium balance",
                            "E) Alterations in hydrogen ion balance"
                        ],
                        answer: "C) Alterations in sodium balance"
                    },
                    {
                        question: "A patient presents with excessive ADH secretion. Which of the following plasma sodium concentrations would you expect to find?",
                        options: [
                            "A) 125 mM",
                            "B) 135 mM",
                            "C) 145 mM",
                            "D) 155 mM",
                            "E) 165 mM"
                        ],
                        answer: "A) 125 mM"
                    },
                    {
                        question: "The normal plasma potassium concentration is approximately:",
                        options: [
                            "A) 2.5 mM",
                            "B) 4.0 mM",
                            "C) 10 mM",
                            "D) 25 mM",
                            "E) 140 mM"
                        ],
                        answer: "B) 4.0 mM"
                    },
                    {
                        question: "Which of the following is likely to cause hyperkalaemia?",
                        options: [
                            "A) Vomiting",
                            "B) Treatment with loop diuretics",
                            "C) Cushing's syndrome",
                            "D) Renal failure",
                            "E) Treatment with β2-adrenoceptor agonists"
                        ],
                        answer: "D) Renal failure"
                    },
                    {
                        question: "Which of the following is an acute treatment for severe hyperkalaemia?",
                        options: [
                            "A) Furosemide (a loop diuretic)",
                            "B) Spironolactone",
                            "C) Insulin with glucose",
                            "D) ACE inhibitors",
                            "E) Potassium supplements"
                        ],
                        answer: "C) Insulin with glucose"
                    },
                    {
                        question: "Which of the following hormones causes reduced potassium excretion in the kidney?",
                        options: [
                            "A) Aldosterone",
                            "B) Antidiuretic hormone",
                            "C) Angiotensin II",
                            "D) Glucagon",
                            "E) Insulin"
                        ],
                        answer: "C) Angiotensin II"
                    },
                    {
                        question: "Hypokalaemia commonly arises as a side effect of:",
                        options: [
                            "A) Beta blockers",
                            "B) Loop diuretics",
                            "C) ACE inhibitors",
                            "D) Calcium channel blockers",
                            "E) Potassium-sparing diuretics"
                        ],
                        answer: "B) Loop diuretics"
                    }
                ]
            },
            {
                title: "REGULATION OF EXTRACELLULAR CALCIUM",
                questions: [
                    {
                        question: "Which hormone is secreted in response to decreased plasma calcium concentration?",
                        options: [
                            "A) Calcitonin",
                            "B) Aldosterone",
                            "C) Parathyroid hormone (PTH)",
                            "D) Cortisol",
                            "E) Vitamin D"
                        ],
                        answer: "C) Parathyroid hormone (PTH)"
                    },
                    {
                        question: "Which hormone directly stimulates calcium uptake from the gut?",
                        options: [
                            "A) 1,25-dihydroxyvitamin D3",
                            "B) Aldosterone",
                            "C) Calcitonin",
                            "D) Cortisol",
                            "E) Parathyroid hormone"
                        ],
                        answer: "A) 1,25-dihydroxyvitamin D3"
                    },
                     {
                        question: "Which hormone is a polypeptide secreted in response to increased plasma calcium concentration?",
                        options: [
                            "A) 1,25-dihydroxyvitamin D3",
                            "B) Aldosterone",
                            "C) Calcitonin",
                            "D) Cortisol",
                            "E) Parathyroid hormone"
                        ],
                        answer: "C) Calcitonin"
                    },
                     {
                        question: "Which hormone most commonly causes osteoporosis when present in excess?",
                        options: [
                            "A) 1,25-dihydroxyvitamin D3",
                            "B) Aldosterone",
                            "C) Calcitonin",
                            "D) Cortisol",
                            "E) Parathyroid hormone"
                        ],
                        answer: "D) Cortisol"
                    },
                     {
                        question: "Formation and reabsorption of bone is primarily regulated by:",
                        options: [
                            "A) Parathyroid hormone, Vitamin D, and calcitonin",
                            "B) Insulin, glucagon, and somatostatin",
                            "C) Aldosterone, ADH, and ANP",
                            "D) Thyroxine, triiodothyronine, and calcitonin",
                            "E) Adrenaline, noradrenaline, and dopamine"
                        ],
                        answer: "A) Parathyroid hormone, Vitamin D, and calcitonin"
                    }
                ]
            },
            {
                title: "ACID-BASE BALANCE",
                questions: [
                    {
                        question: "The primary buffer system in blood is:",
                        options: [
                            "A) Phosphate buffer system",
                            "B) Protein buffer system",
                            "C) Bicarbonate-carbonic acid buffer system",
                            "D) Hemoglobin buffer system",
                            "E) Ammonia buffer system"
                        ],
                        answer: "C) Bicarbonate-carbonic acid buffer system"
                    },
                    {
                        question: "Metabolic acidosis is likely to be caused by:",
                        options: [
                            "A) Vomiting",
                            "B) Hyperventilation",
                            "C) Chronic obstructive pulmonary disease",
                            "D) Diabetic ketoacidosis",
                            "E) Excessive use of antacids"
                        ],
                        answer: "D) Diabetic ketoacidosis"
                    },
                     {
                        question: "Respiratory alkalosis is caused by:",
                        options: [
                            "A) Chronic obstructive pulmonary disease",
                            "B) Hyperventilation",
                            "C) Renal failure",
                            "D) Diarrhea",
                            "E) Diabetic ketoacidosis"
                        ],
                        answer: "B) Hyperventilation"
                    },
                     {
                        question: "In a Davenport diagram, uncompensated metabolic acidosis would be represented by:",
                        options: [
                            "A) Decreased pH, decreased bicarbonate",
                            "B) Decreased pH, increased bicarbonate",
                            "C) Increased pH, decreased bicarbonate",
                            "D) Increased pH, increased bicarbonate",
                            "E) Normal pH, increased bicarbonate"
                        ],
                        answer: "A) Decreased pH, decreased bicarbonate"
                    },
                     {
                        question: "Which of the following is the renal compensation for metabolic acidosis?",
                        options: [
                            "A) Increased bicarbonate reabsorption",
                            "B) Decreased bicarbonate reabsorption",
                            "C) Increased hydrogen ion secretion",
                            "D) Decreased hydrogen ion secretion",
                            "E) Both A and C"
                        ],
                        answer: "E) Both A and C"
                    }
                ]
            },
            {
                title: "IRON HOMEOSTASIS",
                questions: [
                    {
                        question: "Which hormone controls iron absorption by regulating ferroportin in gut mucosal cells?",
                        options: [
                            "A) Erythropoietin",
                            "B) Ferritin",
                            "C) Hepcidin",
                            "D) Transferrin",
                            "E) Hemosiderin"
                        ],
                        answer: "C) Hepcidin"
                    },
                    {
                        question: "The primary transport protein for iron in the bloodstream is:",
                        options: [
                            "A) Albumin",
                            "B) Transferrin",
                            "C) Ferritin",
                            "D) Hepcidin",
                            "E) Hemosiderin"
                        ],
                        answer: "B) Transferrin"
                    },
                     {
                        question: "Which of the following conditions stimulates increased iron absorption?",
                        options: [
                            "A) Inflammation",
                            "B) Infection",
                            "C) Iron overload",
                            "D) Hypoxia",
                            "E) Acute phase response"
                        ],
                        answer: "D) Hypoxia"
                    },
                     {
                        question: "Iron deficiency anemia is characterized by:",
                        options: [
                            "A) High total iron, low transferrin, low ferritin",
                            "B) Low total iron, high transferrin, low ferritin",
                            "C) High total iron, high transferrin, high ferritin",
                            "D) Low total iron, high transferrin, high ferritin",
                            "E) Low total iron, low transferrin, low ferritin"
                        ],
                        answer: "B) Low total iron, high transferrin, low ferritin"
                    }
                ]
            },
             {
                title: "HYPERTENSION AND CARDIAC FAILURE",
                questions: [
                    {
                        question: "Which of the following best describes the Guyton model of long-term control of arterial blood pressure?",
                        options: [
                            "A) Baroreceptor reflex control as a closed system",
                            "B) Renal pressure natriuresis as an open system",
                            "C) Sympathetic nervous system control as a closed system",
                            "D) Renin-angiotensin-aldosterone system as a closed system",
                            "E) Cardiac output and peripheral resistance as a closed system"
                        ],
                        answer: "B) Renal pressure natriuresis as an open system"
                    },
                    {
                        question: "Left-sided heart failure most commonly results from:",
                        options: [
                            "A) Ischemic heart disease",
                            "B) Viral carditis",
                            "C) Valvular heart disease",
                            "D) Primary cardiac tumors",
                            "E) Chronic obstructive pulmonary disease"
                        ],
                        answer: "A) Ischemic heart disease"
                    },
                     {
                        question: "Left ventricular failure causes:",
                        options: [
                            "A) Pulmonary edema",
                            "B) Raised central venous pressure",
                            "C) Hepatomegaly",
                            "D) Ascites",
                            "E) Pulsatile liver"
                        ],
                        answer: "A) Pulmonary edema"
                    },
                     {
                        question: "Which combination of hormones is most likely to be present in supranormal concentrations in a patient with moderate left ventricular failure?",
                        options: [
                            "A) Renin, angiotensin, and adrenaline",
                            "B) Adrenaline and thyroxine",
                            "C) Renin, angiotensin, and thyroxine",
                            "D) Thyroxine and cortisol",
                            "E) Cortisol and acetylcholine"
                        ],
                        answer: "A) Renin, angiotensin, and adrenaline"
                    },
                     {
                        question: "The primary mechanism of action of ACE inhibitors in the treatment of hypertension is:",
                        options: [
                            "A) Inhibition of sodium reabsorption in the kidney",
                            "B) Reduction in peripheral vascular resistance",
                            "C) Reduction in cardiac output",
                            "D) Inhibition of aldosterone secretion",
                            "E) Both B and D"
                        ],
                        answer: "E) Both B and D"
                    }
                ]
            },
             {
                title: "PHYSIOLOGICAL CHALLENGES",
                questions: [
                    {
                        question: "Which of the following occurs on going from lying to standing position?",
                        options: [
                            "A) Increased central venous pressure",
                            "B) Decreased stroke volume",
                            "C) Decreased heart rate",
                            "D) Decreased peripheral resistance",
                            "E) Increased venous return"
                        ],
                        answer: "B) Decreased stroke volume"
                    },
                    {
                        question: "During exercise, the main factor causing vasodilation in active muscles is:",
                        options: [
                            "A) Increased sympathetic activity",
                            "B) Decreased parasympathetic activity",
                            "C) Increased circulating epinephrine",
                            "D) Local metabolites",
                            "E) Decreased norepinephrine release"
                        ],
                        answer: "D) Local metabolites"
                    },
                     {
                        question: "At high altitude, ventilation is increased primarily due to:",
                        options: [
                            "A) Decreased PO2",
                            "B) Increased PCO2",
                            "C) Decreased arterial pH",
                            "D) Increased arterial pH",
                            "E) Increased body temperature"
                        ],
                        answer: "A) Decreased PO2"
                    },
                     {
                        question: "The body's response to hypothermia outside the thermoneutral zone includes:",
                        options: [
                            "A) Piloerection and shivering",
                            "B) Piloerection and vasodilation",
                            "C) Sweating and vasodilation",
                            "D) Shivering and vasodilation",
                            "E) Sweating and vasoconstriction"
                        ],
                        answer: "A) Piloerection and shivering"
                    },
                     {
                        question: "The primary response to an increase in core temperature within the thermoneutral zone is:",
                        options: [
                            "A) Sweating and vasodilation",
                            "B) Vasodilation only",
                            "C) Vasoconstriction",
                            "D) Shivering",
                            "E) Piloerection"
                        ],
                        answer: "B) Vasodilation only"
                    },
                    {
                        question: "The use of which drug can prevent or treat high altitude sickness?",
                        options: [
                            "A) Acetazolamide",
                            "B) Propranolol",
                            "C) Ramipril",
                            "D) Furosemide",
                            "E) Amlodipine"
                        ],
                        answer: "A) Acetazolamide"
                    },
                     {
                        question: "Hypoxic pulmonary vasoconstriction at high altitude can lead to:",
                        options: [
                            "A) Pulmonary edema",
                            "B) Cerebral edema",
                            "C) Systemic hypertension",
                            "D) Systemic hypotension",
                            "E) Metabolic alkalosis"
                        ],
                        answer: "A) Pulmonary edema"
                    }
                ]
            },
             {
                title: "ASTHMA AND RESPIRATORY PHARMACOLOGY",
                questions: [
                    {
                        question: "Which of the following drugs is used to target the inflammatory component in asthma?",
                        options: [
                            "A) β2-adrenoceptor agonists",
                            "B) Corticosteroids",
                            "C) Muscarinic antagonists",
                            "D) Xanthines",
                            "E) Leukotriene antagonists"
                        ],
                        answer: "B) Corticosteroids"
                    },
                    {
                        question: "The primary action of salbutamol in asthma treatment is:",
                        options: [
                            "A) Anti-inflammatory",
                            "B) Mucolytic",
                            "C) Bronchodilation",
                            "D) Mast cell stabilization",
                            "E) Cough suppression"
                        ],
                        answer: "C) Bronchodilation"
                    },
                     {
                        question: "Which drug class is contraindicated in patients with asthma?",
                        options: [
                            "A) β2-adrenoceptor agonists",
                            "B) β-adrenoceptor antagonists (beta-blockers)",
                            "C) Muscarinic antagonists",
                            "D) Leukotriene antagonists",
                            "E) Corticosteroids"
                        ],
                        answer: "B) β-adrenoceptor antagonists (beta-blockers)"
                    },
                     {
                        question: "Ipratropium is beneficial in asthma treatment due to its action as a:",
                        options: [
                            "A) β2-adrenoceptor agonist",
                            "B) β-adrenoceptor antagonist",
                            "C) Muscarinic antagonist",
                            "D) Leukotriene antagonist",
                            "E) Mast cell stabilizer"
                        ],
                        answer: "C) Muscarinic antagonist"
                    },
                     {
                        question: "The mechanism of action of corticosteroids in asthma involves:",
                        options: [
                            "A) Direct bronchodilation",
                            "B) Inhibition of phosphodiesterase",
                            "C) Antagonism of muscarinic receptors",
                            "D) Suppression of inflammatory gene transcription",
                            "E) Blocking of leukotriene receptors"
                        ],
                        answer: "D) Suppression of inflammatory gene transcription"
                    }
                ]
            },
             {
                title: "ANAESTHESIA",
                questions: [
                    {
                        question: "Which of the following is an intravenous general anesthetic agent?",
                        options: [
                            "A) Isoflurane",
                            "B) Propofol",
                            "C) Atropine",
                            "D) Morphine",
                            "E) Sevoflurane"
                        ],
                        answer: "B) Propofol"
                    },
                    {
                        question: "Neuromuscular blocking drugs used during general anesthesia typically work by:",
                        options: [
                            "A) Blocking nicotinic acetylcholine receptors at the neuromuscular junction",
                            "B) Blocking muscarinic acetylcholine receptors",
                            "C) Enhancing GABA-mediated inhibition",
                            "D) Blocking voltage-gated sodium channels",
                            "E) Enhancing glycine-mediated inhibition"
                        ],
                        answer: "A) Blocking nicotinic acetylcholine receptors at the neuromuscular junction"
                    },
                     {
                        question: "The effects of non-depolarizing neuromuscular blocking agents can be reversed by:",
                        options: [
                            "A) Naloxone",
                            "B) Flumazenil",
                            "C) Neostigmine",
                            "D) Atropine",
                            "E) Glycopyrrolate"
                        ],
                        answer: "C) Neostigmine"
                    },
                     {
                        question: "Which of the following drugs is used to reduce secretions during general anesthesia?",
                        options: [
                            "A) Propofol",
                            "B) Atropine",
                            "C) Morphine",
                            "D) Suxamethonium",
                            "E) Haloperidol"
                        ],
                        answer: "B) Atropine"
                    },
                     {
                        question: "Common cardiovascular effects of inhalational anesthetics include:",
                        options: [
                            "A) Increased cardiac output and increased blood pressure",
                            "B) Decreased cardiac output and increased blood pressure",
                            "C) Increased cardiac output and decreased blood pressure",
                            "D) Decreased cardiac output and decreased blood pressure",
                            "E) No significant effect on cardiovascular parameters"
                        ],
                        answer: "D) Decreased cardiac output and decreased blood pressure"
                    }
                ]
            },
             {
                title: "INTEGRATIVE ROLE OF THE HYPOTHALAMUS",
                questions: [
                    {
                        question: "Which nucleus in the hypothalamus functions as the biological clock?",
                        options: [
                            "A) Suprachiasmatic nucleus",
                            "B) Anterior hypothalamus",
                            "C) Posterior hypothalamus",
                            "D) Ventromedial nucleus",
                            "E) Lateral hypothalamus"
                        ],
                        answer: "A) Suprachiasmatic nucleus"
                    },
                    {
                        question: "The hypothalamic nucleus associated with the satiety center is:",
                        options: [
                            "A) Anterior nucleus",
                            "B) Supraoptic nucleus",
                            "C) Arcuate nucleus",
                            "D) Ventromedial nucleus",
                            "E) Lateral hypothalamus"
                        ],
                        answer: "D) Ventromedial nucleus"
                    },
                     {
                        question: "The hypothalamic nucleus associated with the feeding center is:",
                        options: [
                            "A) Anterior nucleus",
                            "B) Supraoptic nucleus",
                            "C) Arcuate nucleus",
                            "D) Ventromedial nucleus",
                            "E) Lateral hypothalamus"
                        ],
                        answer: "E) Lateral hypothalamus"
                    },
                     {
                        question: "Which of the following hormones is secreted from the posterior pituitary?",
                        options: [
                            "A) Thyroid stimulating hormone (TSH)",
                            "B) Adrenocorticotropic hormone (ACTH)",
                            "C) Growth hormone (GH)",
                            "D) Oxytocin",
                            "E) Follicle stimulating hormone (FSH)"
                        ],
                        answer: "D) Oxytocin"
                    },
                     {
                        question: "The acute stress response involves activation of:",
                        options: [
                            "A) The sympathetic nervous system only",
                            "B) The parasympathetic nervous system only",
                            "C) Both sympathetic and parasympathetic nervous systems equally",
                            "D) The hypothalamo-pituitary-adrenal axis only",
                            "E) Both the sympathetic nervous system and the hypothalamo-pituitary-adrenal axis"
                        ],
                        answer: "E) Both the sympathetic nervous system and the hypothalamo-pituitary-adrenal axis"
                    }
                ]
            },
             {
                title: "METABOLISM, GROWTH AND APPETITE",
                questions: [
                    {
                        question: "Which hormone is produced by adipose tissue and acts as a satiety signal?",
                        options: [
                            "A) Ghrelin",
                            "B) Leptin",
                            "C) Insulin",
                            "D) Glucagon",
                            "E) Cholecystokinin"
                        ],
                        answer: "B) Leptin"
                    },
                    {
                        question: "The gastrointestinal hormone that stimulates appetite is:",
                        options: [
                            "A) Leptin",
                            "B) Ghrelin",
                            "C) Cholecystokinin (CCK)",
                            "D) Peptide YY (PYY)",
                            "E) Glucagon-like peptide-1 (GLP-1)"
                        ],
                        answer: "B) Ghrelin"
                    },
                     {
                        question: "Which of the following characterizes metabolic syndrome?",
                        options: [
                            "A) Hypotension, hypoglycemia, and elevated HDL cholesterol",
                            "B) Hypertension, hyperglycemia, and decreased HDL cholesterol",
                            "C) Hypotension, hyperglycemia, and elevated HDL cholesterol",
                            "D) Hypertension, hypoglycemia, and decreased HDL cholesterol",
                            "E) Normal blood pressure, hyperglycemia, and elevated HDL cholesterol"
                        ],
                        answer: "B) Hypertension, hyperglycemia, and decreased HDL cholesterol"
                    },
                     {
                        question: "Type 2 diabetes mellitus is most strongly associated with:",
                        options: [
                            "A) Auto-immune destruction of pancreatic β-cells",
                            "B) Insulin resistance",
                            "C) Excess glucagon production",
                            "D) Total absence of insulin secretion",
                            "E) Excessive insulin secretion"
                        ],
                        answer: "B) Insulin resistance"
                    },
                     {
                        question: "The main action of metformin in the treatment of type 2 diabetes is:",
                        options: [
                            "A) Increasing insulin secretion from the pancreas",
                            "B) Decreasing glucagon secretion",
                            "C) Increasing insulin sensitivity in target tissues",
                            "D) Blocking glucose absorption from the gut",
                            "E) Stimulating extra-pancreatic insulin production"
                        ],
                        answer: "C) Increasing insulin sensitivity in target tissues"
                    }
                ]
            },
             {
                title: "REPRODUCTION",
                questions: [
                    {
                        question: "Which hormone is responsible for the development of the endometrial layer of the uterus during the menstrual cycle?",
                        options: [
                            "A) Estrogen",
                            "B) Follicle stimulating hormone",
                            "C) Human chorionic gonadotropin",
                            "D) Oxytocin",
                            "E) Progesterone"
                        ],
                        answer: "E) Progesterone"
                    },
                    {
                        question: "During pregnancy, which hormone maintains uterine quiescence by relaxing uterine smooth muscle?",
                        options: [
                            "A) Estradiol",
                            "B) Human chorionic gonadotropin",
                            "C) Oxytocin",
                            "D) Progesterone",
                            "E) Prostaglandins"
                        ],
                        answer: "D) Progesterone"
                    },
                     {
                        question: "Which hormone is primarily responsible for initiating and maintaining spermatogenesis?",
                        options: [
                            "A) Estrogen",
                            "B) Follicle stimulating hormone",
                            "C) Luteinizing hormone",
                            "D) Progesterone",
                            "E) Testosterone"
                        ],
                        answer: "B) Follicle stimulating hormone"
                    },
                     {
                        question: "The Ferguson reflex is associated with:",
                        options: [
                            "A) Initiation of lactation",
                            "B) Milk ejection during lactation",
                            "C) Initiation of parturition",
                            "D) Fetal development",
                            "E) Implantation"
                        ],
                        answer: "C) Initiation of parturition"
                    },
                     {
                        question: "Which hormone stimulates testosterone production by Leydig cells?",
                        options: [
                            "A) Estrogen",
                            "B) Follicle stimulating hormone",
                            "C) Luteinizing hormone",
                            "D) Oxytocin",
                            "E) Progesterone"
                        ],
                        answer: "C) Luteinizing hormone"
                    },
                    {
                        question: "Which hormone stimulates milk synthesis in the mammary gland?",
                        options: [
                            "A) Cortisol",
                            "B) Estradiol",
                            "C) Oxytocin",
                            "D) Progesterone",
                            "E) Prolactin"
                        ],
                        answer: "E) Prolactin"
                    },
                    {
                        question: "Which hormone stimulates milk ejection from the mammary gland?",
                        options: [
                            "A) Cortisol",
                            "B) Estradiol",
                            "C) Oxytocin",
                            "D) Progesterone",
                            "E) Prolactin"
                        ],
                        answer: "C) Oxytocin"
                    },
                    {
                        question: "What is the main hormone that stimulates growth of mammary gland ducts?",
                        options: [
                            "A) Estradiol",
                            "B) Progesterone",
                            "C) Prolactin",
                            "D) Testosterone",
                            "E) Oxytocin"
                        ],
                        answer: "A) Estradiol"
                    },
                    {
                        question: "What is the main hormone that stimulates growth of mammary alveoli?",
                        options: [
                            "A) Estradiol",
                            "B) Progesterone",
                            "C) Prolactin",
                            "D) Testosterone",
                            "E) Oxytocin"
                        ],
                        answer: "B) Progesterone"
                    },
                    {
                        question: "Which hormone stimulates the differentiation and growth of male external genitalia?",
                        options: [
                            "A) Cortisol",
                            "B) Dihydrotestosterone (DHT)",
                            "C) Follicle Stimulating Hormone",
                            "D) Testosterone",
                            "E) Estradiol"
                        ],
                        answer: "B) Dihydrotestosterone (DHT)"
                    },
                    {
                        question: "When the spermatozoon makes contact with the zona pellucida:",
                        options: [
                            "A) Acrosomal enzymes are released",
                            "B) The ovum and spermatozoon are usually in the uterus",
                            "C) The spermatozoon nucleus completes its first meiotic division",
                            "D) The spermatozoon nucleus completes its second meiotic division",
                            "E) The zona pellucida hardens immediately"
                        ],
                        answer: "A) Acrosomal enzymes are released"
                    }
                ]
            },
            {
                title: "CARDIOVASCULAR REGULATION IN ILLNESS",
                questions: [
                     {
                        question: "Septic shock is initially characterized by:",
                        options: [
                            "A) A fall in peripheral vascular resistance",
                            "B) A fall in cardiac output",
                            "C) A rise in peripheral vascular resistance",
                            "D) Pulmonary hypertension",
                            "E) Renal failure"
                        ],
                        answer: "A) A fall in peripheral vascular resistance"
                    },
                    {
                        question: "Which of the following best describes cardiogenic shock?",
                        options: [
                            "A) A fall in peripheral vascular resistance with high cardiac output",
                            "B) A fall in cardiac output due to cardiac dysfunction",
                            "C) A rise in peripheral vascular resistance with normal cardiac output",
                            "D) Excessive vasodilation due to mediators from infection",
                            "E) Normal cardiac function with decreased venous return"
                        ],
                        answer: "B) A fall in cardiac output due to cardiac dysfunction"
                    },
                     {
                        question: "Widespread poor tissue perfusion leads to:",
                        options: [
                            "A) Metabolic alkalosis",
                            "B) Metabolic acidosis",
                            "C) Respiratory alkalosis",
                            "D) Respiratory acidosis",
                            "E) None of the above"
                        ],
                        answer: "B) Metabolic acidosis"
                    },
                     {
                        question: "In the management of septic shock, which of the following is an appropriate early intervention?",
                        options: [
                            "A) Administration of beta-blockers",
                            "B) Fluid resuscitation to restore central venous pressure",
                            "C) Administration of diuretics",
                            "D) Induction of hypothermia",
                            "E) Administration of calcium channel blockers"
                        ],
                        answer: "B) Fluid resuscitation to restore central venous pressure"
                    },
                     {
                        question: "Anaphylactic shock involves:",
                        options: [
                            "A) Massive vasodilation and increased capillary permeability",
                            "B) Massive vasoconstriction and decreased capillary permeability",
                            "C) Normal vascular tone with decreased cardiac output",
                            "D) Normal vascular permeability with increased cardiac output",
                            "E) Pulmonary vasoconstriction with normal systemic circulation"
                        ],
                        answer: "A) Massive vasodilation and increased capillary permeability"
                    }
                ]
            },
            {
                title: "DIURETIC DRUGS",
                questions: [
                     {
                        question: "Which of the following diuretics acts by inhibiting the NaK2Cl transporter in the thick ascending limb of the loop of Henle?",
                        options: [
                            "A) Acetazolamide",
                            "B) Amiloride",
                            "C) Bendroflumethiazide",
                            "D) Furosemide",
                            "E) Spironolactone"
                        ],
                        answer: "D) Furosemide"
                    },
                     {
                        question: "Thiazide diuretics primarily act on:",
                        options: [
                            "A) The proximal convoluted tubule",
                            "B) The distal convoluted tubule",
                            "C) The loop of Henle",
                            "D) The collecting duct",
                            "E) The glomerulus"
                        ],
                        answer: "B) The distal convoluted tubule"
                    },
                     {
                        question: "Which of the following is an aldosterone antagonist?",
                        options: [
                            "A) Acetazolamide",
                            "B) Amiloride",
                            "C) Bendroflumethiazide",
                            "D) Furosemide",
                            "E) Spironolactone"
                        ],
                        answer: "E) Spironolactone"
                    },
                    {
                        question: "A side effect of aldosterone antagonists is:",
                        options: [
                            "A) A fall in plasma potassium concentration",
                            "B) A rise in plasma potassium concentration",
                            "C) Metabolic acidosis",
                            "D) Increased sodium retention",
                            "E) Increased calcium excretion"
                        ],
                        answer: "B) A rise in plasma potassium concentration"
                    },
                    {
                        question: "Amiloride acts on:",
                        options: [
                            "A) The NaCl transporter of the distal convoluted tubule",
                            "B) The NaCl transporter of the loop of Henle",
                            "C) The NaK2Cl transporter of the distal convoluted tubule",
                            "D) The NaKATPase of the loop of Henle",
                            "E) The sodium channel of the collecting duct"
                        ],
                        answer: "E) The sodium channel of the collecting duct"
                    }
                ]
            },
            {
                title: "EXERCISE PHYSIOLOGY",
                questions: [
                     {
                        question: "The main factor limiting maximal oxygen consumption (VO2max) in a healthy individual is:",
                        options: [
                            "A) Pulmonary diffusion capacity",
                            "B) Maximal cardiac output",
                            "C) Oxygen extraction by skeletal muscle",
                            "D) Maximal ventilation",
                            "E) Oxygen carrying capacity of the blood"
                        ],
                        answer: "B) Maximal cardiac output"
                    },
                    {
                        question: "During moderate exercise, stroke volume increases primarily due to:",
                        options: [
                            "A) Increased heart rate",
                            "B) Increased preload",
                            "C) Decreased afterload",
                            "D) Increased contractility",
                            "E) All of the above"
                        ],
                        answer: "B) Increased preload"
                    },
                    {
                        question: "The respiratory exchange ratio (RER) during high-intensity exercise typically:",
                        options: [
                            "A) Decreases below 0.7",
                            "B) Remains constant at 0.8",
                            "C) Increases above 1.0",
                            "D) Remains constant at 1.0",
                            "E) Has no relationship to exercise intensity"
                        ],
                        answer: "C) Increases above 1.0"
                    },
                     {
                        question: "During steady-state submaximal exercise, which of the following best describes the relationship between oxygen consumption and work rate?",
                        options: [
                            "A) Exponential relationship",
                            "B) Logarithmic relationship",
                            "C) Linear relationship",
                            "D) Sigmoid relationship",
                            "E) Hyperbolic relationship"
                        ],
                        answer: "C) Linear relationship"
                    },
                    {
                        question: "Which mechanism is primarily responsible for the increased ventilation during moderate exercise?",
                        options: [
                            "A) Hypoxic stimulation of peripheral chemoreceptors",
                            "B) Hypercapnic stimulation of central chemoreceptors",
                            "C) Neural input from working muscles and motor cortex",
                            "D) Decreased lung compliance",
                            "E) Acidosis stimulating central chemoreceptors"
                        ],
                        answer: "C) Neural input from working muscles and motor cortex"
                    }
                ]
            },
            {
                title: "CONTROL OF BREATHING",
                questions: [
                    {
                        question: "Respiratory rhythm generation is located in:",
                        options: [
                            "A) The cerebral cortex",
                            "B) The basal ganglia",
                            "C) The brainstem",
                            "D) The diaphragm",
                            "E) The hypothalamus"
                        ],
                        answer: "C) The brainstem"
                    },
                    {
                        question: "Ventilatory responses to arterial hypoxemia are primarily initiated by:",
                        options: [
                            "A) Central chemoreceptors in the medulla",
                            "B) Peripheral chemoreceptors in the carotid and aortic bodies",
                            "C) Stretch receptors in the airways",
                            "D) Juxtacapillary receptors in the lungs",
                            "E) Mechanoreceptors in the diaphragm"
                        ],
                        answer: "B) Peripheral chemoreceptors in the carotid and aortic bodies"
                    },
                     {
                        question: "The ventilatory response to hypercapnia is primarily mediated by:",
                        options: [
                            "A) Peripheral chemoreceptors only",
                            "B) Central chemoreceptors only",
                            "C) Both central and peripheral chemoreceptors",
                            "D) J-receptors in the lungs",
                            "E) Stretch receptors in the airways"
                        ],
                        answer: "C) Both central and peripheral chemoreceptors"
                    },
                     {
                        question: "Hypercapnia stimulates ventilation through changes in brain interstitial pH sensed by:",
                        options: [
                            "A) Central chemoreceptors close to the surface of the medulla",
                            "B) Peripheral chemoreceptors in the carotid body",
                            "C) Chemoreceptors in the airways",
                            "D) Chemoreceptors in the cerebral cortex",
                            "E) Chemoreceptors in the hypothalamus"
                        ],
                        answer: "A) Central chemoreceptors close to the surface of the medulla"
                    },
                    {
                        question: "The Hering-Breuer reflex:",
                        options: [
                            "A) Stimulates inspiration when lung volume is high",
                            "B) Inhibits inspiration when lung volume is high",
                            "C) Stimulates expiration when lung volume is low",
                            "D) Has no effect on respiratory rhythm",
                            "E) Is only active during sleep"
                        ],
                        answer: "B) Inhibits inspiration when lung volume is high"
                    }
                ]
            },
            {
                title: "PHARMACOLOGY OF HYPERTENSION AND HEART FAILURE",
                questions: [
                    {
                        question: "Which class of drugs reduces blood pressure by preventing the conversion of angiotensin I to angiotensin II?",
                        options: [
                            "A) Angiotensin receptor blockers",
                            "B) Beta-blockers",
                            "C) Calcium channel blockers",
                            "D) ACE inhibitors",
                            "E) Alpha-blockers"
                        ],
                        answer: "D) ACE inhibitors"
                    }
                ]
            },
            {
                title: "DRUG TOXICITY AND INTERACTIONS",
                questions: [
                     {
                        question: "Which of the following drugs requires regular monitoring of blood levels due to its narrow therapeutic index?",
                        options: [
                            "A) Atenolol",
                            "B) Digoxin",
                            "C) Losartan",
                            "D) Simvastatin",
                            "E) Salbutamol"
                        ],
                        answer: "B) Digoxin"
                    },
                     {
                        question: "Paracetamol (acetaminophen) toxicity primarily affects:",
                        options: [
                            "A) The liver",
                            "B) The kidney",
                            "C) The heart",
                            "D) The central nervous system",
                            "E) The respiratory system"
                        ],
                        answer: "A) The liver"
                    },
                    {
                        question: "The treatment for paracetamol (acetaminophen) overdose is:",
                        options: [
                            "A) Flumazenil",
                            "B) Naloxone",
                            "C) N-acetylcysteine",
                            "D) Activated charcoal only",
                            "E) Forced diuresis"
                        ],
                        answer: "C) N-acetylcysteine"
                    },
                    {
                        question: "Which of the following drug combinations may lead to serious hyperkalemia?",
                        options: [
                            "A) ACE inhibitors and thiazide diuretics",
                            "B) ACE inhibitors and potassium-sparing diuretics",
                            "C) Beta-blockers and calcium channel blockers",
                            "D) Statins and fibrates",
                            "E) Aspirin and paracetamol"
                        ],
                        answer: "B) ACE inhibitors and potassium-sparing diuretics"
                    },
                    {
                        question: "Which of the following drug interactions involves CYP450 enzyme induction?",
                        options: [
                            "A) Grapefruit juice increasing levels of some calcium channel blockers",
                            "B) Rifampicin decreasing effectiveness of oral contraceptives",
                            "C) Amiodarone increasing levels of digoxin",
                            "D) NSAIDs reducing the effectiveness of antihypertensives",
                            "E) ACE inhibitors increasing the risk of lithium toxicity"
                        ],
                        answer: "B) Rifampicin decreasing effectiveness of oral contraceptives"
                    }
                ]
            },
            {
                title: "HORMONAL PHYSIOLOGY AND PHARMACOLOGY",
                questions: [
                     {
                        question: "Hypothyroidism is characterized by:",
                        options: [
                            "A) Increased metabolic rate",
                            "B) Weight loss",
                            "C) Heat intolerance",
                            "D) Bradycardia",
                            "E) Diarrhea"
                        ],
                        answer: "D) Bradycardia"
                    },
                    {
                        question: "The primary site of thyroxine (T4) to triiodothyronine (T3) conversion is:",
                        options: [
                            "A) Thyroid gland",
                            "B) Liver",
                            "C) Kidney",
                            "D) Pituitary gland",
                            "E) Hypothalamus"
                        ],
                        answer: "B) Liver"
                    },
                     {
                        question: "Which hormone's action is inhibited by spironolactone?",
                        options: [
                            "A) Angiotensin II",
                            "B) Aldosterone",
                            "C) ADH (vasopressin)",
                            "D) Atrial natriuretic peptide",
                            "E) Cortisol"
                        ],
                        answer: "B) Aldosterone"
                    },
                     {
                        question: "Cushing's syndrome is caused by excess:",
                        options: [
                            "A) Aldosterone",
                            "B) Cortisol",
                            "C) Growth hormone",
                            "D) Insulin",
                            "E) Thyroid hormone"
                        ],
                        answer: "B) Cortisol"
                    },
                    {
                        question: "Which of the following is the site of action for insulin?",
                        options: [
                            "A) Cell nucleus",
                            "B) Mitochondria",
                            "C) Cell membrane receptor with tyrosine kinase activity",
                            "D) G protein-coupled receptor",
                            "E) Ion channels"
                        ],
                        answer: "C) Cell membrane receptor with tyrosine kinase activity"
                    }
                ]
            },
            {
                title: "PHYSIOLOGY AND PHARMACOLOGY OF HEMOSTASIS",
                questions: [
                     {
                        question: "Which of the following is NOT a component of primary hemostasis?",
                        options: [
                            "A) Platelet adhesion",
                            "B) Platelet activation",
                            "C) Platelet aggregation",
                            "D) Fibrin formation",
                            "E) Vasoconstriction"
                        ],
                        answer: "D) Fibrin formation"
                    },
                    {
                        question: "Aspirin inhibits platelet function by:",
                        options: [
                            "A) Blocking ADP receptors",
                            "B) Inhibiting phosphodiesterase",
                            "C) Irreversibly inhibiting cyclooxygenase",
                            "D) Blocking GPIIb/IIIa receptors",
                            "E) Inhibiting vitamin K-dependent clotting factors"
                        ],
                        answer: "C) Irreversibly inhibiting cyclooxygenase"
                    },
                     {
                        question: "Warfarin exerts its anticoagulant effect by:",
                        options: [
                            "A) Inhibiting platelet aggregation",
                            "B) Activating antithrombin III",
                            "C) Inhibiting vitamin K epoxide reductase",
                            "D) Directly inhibiting thrombin",
                            "E) Activating plasminogen"
                        ],
                        answer: "C) Inhibiting vitamin K epoxide reductase"
                    },
                     {
                        question: "Heparin primarily acts by:",
                        options: [
                            "A) Inhibiting vitamin K-dependent clotting factors",
                            "B) Enhancing antithrombin III activity",
                            "C) Inhibiting platelet aggregation",
                            "D) Directly dissolving fibrin clots",
                            "E) Inhibiting thromboxane A2 synthesis"
                        ],
                        answer: "B) Enhancing antithrombin III activity"
                    },
                     {
                        question: "In disseminated intravascular coagulation (DIC), there is:",
                        options: [
                            "A) Increased platelet count",
                            "B) Increased fibrinogen levels",
                            "C) Decreased D-dimer levels",
                            "D) Simultaneous clotting and bleeding",
                            "E) Normal prothrombin time"
                        ],
                        answer: "D) Simultaneous clotting and bleeding"
                    }
                ]
            },
            {
                title: "FLUID AND ELECTROLYTE PHYSIOLOGY",
                questions: [
                     {
                        question: "In a patient with severe vomiting, you would expect:",
                        options: [
                            "A) Metabolic acidosis and hypokalemia",
                            "B) Metabolic alkalosis and hypokalemia",
                            "C) Metabolic acidosis and hyperkalemia",
                            "D) Metabolic alkalosis and hyperkalemia",
                            "E) Respiratory alkalosis and hypokalemia"
                        ],
                        answer: "B) Metabolic alkalosis and hypokalemia"
                    },
                     {
                        question: "In diabetic ketoacidosis, there is typically:",
                        options: [
                            "A) Hyperkalemia despite total body potassium depletion",
                            "B) Hypokalemia despite total body potassium excess",
                            "C) Hyperkalemia with total body potassium excess",
                            "D) Hypokalemia with total body potassium depletion",
                            "E) Normal serum potassium with total body potassium depletion"
                        ],
                        answer: "A) Hyperkalemia despite total body potassium depletion"
                    },
                    {
                        question: "The most appropriate initial fluid for resuscitation in hypovolemic shock is:",
                        options: [
                            "A) 5% Dextrose",
                            "B) 0.9% Sodium chloride (normal saline)",
                            "C) 0.45% Sodium chloride (half-normal saline)",
                            "D) Ringer's lactate",
                            "E) 5% Albumin"
                        ],
                        answer: "B) 0.9% Sodium chloride (normal saline)"
                    },
                    {
                        question: "Which of the following would most likely cause hypernatremia?",
                        options: [
                            "A) Syndrome of inappropriate ADH secretion (SIADH)",
                            "B) Heart failure",
                            "C) Diabetes insipidus",
                            "D) Renal failure",
                            "E) Cirrhosis"
                        ],
                        answer: "C) Diabetes insipidus"
                    },
                     {
                        question: "The normal anion gap is approximately:",
                        options: [
                            "A) 4-8 mEq/L",
                            "B) 8-12 mEq/L",
                            "C) 12-16 mEq/L",
                            "D) 16-20 mEq/L",
                            "E) 20-24 mEq/L"
                        ],
                        answer: "B) 8-12 mEq/L"
                    }
                ]
            },
             {
                title: "SHOCK AND CARDIOVASCULAR EMERGENCIES",
                questions: [
                    {
                        question: "Septic shock is primarily characterized by:",
                        options: [
                            "A) Decreased cardiac output with increased systemic vascular resistance",
                            "B) Decreased cardiac output with decreased systemic vascular resistance",
                            "C) Increased cardiac output with increased systemic vascular resistance",
                            "D) Increased cardiac output with decreased systemic vascular resistance",
                            "E) Normal cardiac output with normal systemic vascular resistance"
                        ],
                        answer: "D) Increased cardiac output with decreased systemic vascular resistance"
                    },
                    {
                        question: "Which of the following is the primary mechanism of cardiogenic shock?",
                        options: [
                            "A) Decreased blood volume",
                            "B) Cardiac pump failure",
                            "C) Systemic vasodilation",
                            "D) Obstruction to blood flow",
                            "E) Increased vascular permeability"
                        ],
                        answer: "B) Cardiac pump failure"
                    },
                    {
                        question: "The first-line vasopressor in the treatment of septic shock is:",
                        options: [
                            "A) Epinephrine",
                            "B) Dopamine",
                            "C) Norepinephrine",
                            "D) Phenylephrine",
                            "E) Vasopressin"
                        ],
                        answer: "C) Norepinephrine"
                    },
                    {
                        question: "Anaphylactic shock results from:",
                        options: [
                            "A) Type I hypersensitivity reaction",
                            "B) Type II hypersensitivity reaction",
                            "C) Type III hypersensitivity reaction",
                            "D) Type IV hypersensitivity reaction",
                            "E) Type V hypersensitivity reaction"
                        ],
                        answer: "A) Type I hypersensitivity reaction"
                    },
                    {
                        question: "In hypovolemic shock, which compensatory mechanism occurs first?",
                        options: [
                            "A) Increase in heart rate",
                            "B) Release of aldosterone",
                            "C) Release of ADH (vasopressin)",
                            "D) Activation of the renin-angiotensin system",
                            "E) Redistribution of blood flow from non-vital to vital organs"
                        ],
                        answer: "A) Increase in heart rate"
                    }
                ]
            },
             {
                title: "PREGNANCY PHYSIOLOGY AND PHARMACOLOGY",
                questions: [
                    {
                        question: "During normal pregnancy, which of the following does NOT occur?",
                        options: [
                            "A) Increased plasma volume",
                            "B) Increased cardiac output",
                            "C) Increased systemic vascular resistance",
                            "D) Increased glomerular filtration rate",
                            "E) Increased tidal volume"
                        ],
                        answer: "C) Increased systemic vascular resistance"
                    },
                    {
                        question: "Which hormone is responsible for maintaining the corpus luteum during early pregnancy?",
                        options: [
                            "A) Estrogen",
                            "B) Progesterone",
                            "C) Human chorionic gonadotropin (hCG)",
                            "D) Human placental lactogen",
                            "E) Prolactin"
                        ],
                        answer: "C) Human chorionic gonadotropin (hCG)"
                    },
                     {
                        question: "The placenta synthesizes which of the following hormones?",
                        options: [
                            "A) Follicle stimulating hormone",
                            "B) Luteinizing hormone",
                            "C) Thyroid stimulating hormone",
                            "D) Human placental lactogen",
                            "E) Oxytocin"
                        ],
                        answer: "D) Human placental lactogen"
                    },
                     {
                        question: "Which mechanism best explains the onset of labor?",
                        options: [
                            "A) Increased prostaglandin synthesis",
                            "B) Decreased progesterone production",
                            "C) Increased oxytocin receptor expression",
                            "D) Fetal cortisol stimulating estrogen production",
                            "E) All of the above"
                        ],
                        answer: "E) All of the above"
                    },
                    {
                        question: "Oxytocin administration during labor can cause:",
                        options: [
                            "A) Decreased uterine contractions",
                            "B) Increased fetal heart rate",
                            "C) Water intoxication in the mother",
                            "D) Decreased maternal blood pressure",
                            "E) Increased maternal glucose levels"
                        ],
                        answer: "C) Water intoxication in the mother"
                    }
                ]
            },
            {
                title: "RENAL PHYSIOLOGY IN HEALTH AND DISEASE",
                questions: [
                    {
                        question: "The juxtaglomerular apparatus is composed of:",
                        options: [
                            "A) Macula densa cells and juxtaglomerular cells",
                            "B) Mesangial cells and podocytes",
                            "C) Bowman's capsule and proximal tubular cells",
                            "D) Collecting duct cells and distal tubular cells",
                            "E) Henle's loop cells and interstitial cells"
                        ],
                        answer: "A) Macula densa cells and juxtaglomerular cells"
                    },
                    {
                        question: "Autoregulation of glomerular filtration rate (GFR) occurs via:",
                        options: [
                            "A) The renin-angiotensin-aldosterone system",
                            "B) Myogenic mechanism and tubuloglomerular feedback",
                            "C) Changes in plasma protein concentration",
                            "D) Sympathetic nervous system control",
                            "E) Antidiuretic hormone (ADH) release"
                        ],
                        answer: "B) Myogenic mechanism and tubuloglomerular feedback"
                    },
                    {
                        question: "In acute renal failure due to acute tubular necrosis, which phase is characterized by increasing urine output?",
                        options: [
                            "A) Initiation phase",
                            "B) Extension phase",
                            "C) Maintenance phase",
                            "D) Recovery phase",
                            "E) Resolution phase"
                        ],
                        answer: "D) Recovery phase"
                    },
                    {
                        question: "Which of the following is the primary site of action of furosemide?",
                        options: [
                            "A) Proximal convoluted tubule",
                            "B) Descending limb of Henle's loop",
                            "C) Thick ascending limb of Henle's loop",
                            "D) Distal convoluted tubule",
                            "E) Collecting duct"
                        ],
                        answer: "C) Thick ascending limb of Henle's loop"
                    },
                    {
                        question: "Which of the following electrolyte abnormalities is most likely to occur in a patient with chronic renal failure?",
                        options: [
                            "A) Hyponatremia, hypokalemia, hypocalcemia",
                            "B) Hypernatremia, hypokalemia, hypocalcemia",
                            "C) Hyponatremia, hyperkalemia, hypercalcemia",
                            "D) Hypernatremia, hyperkalemia, hypercalcemia",
                            "E) Hyponatremia, hyperkalemia, hypocalcemia"
                        ],
                        answer: "E) Hyponatremia, hyperkalemia, hypocalcemia"
                    }
                ]
            },
             {
                title: "NEUROPHYSIOLOGY AND NEUROPHARMACOLOGY",
                questions: [
                    {
                        question: "The blood-brain barrier is formed by:",
                        options: [
                            "A) Astrocytes only",
                            "B) Microglia only",
                            "C) Capillary endothelial cells with tight junctions",
                            "D) Neurons and their processes",
                            "E) Ependymal cells lining the ventricles"
                        ],
                        answer: "C) Capillary endothelial cells with tight junctions"
                    },
                    {
                        question: "Which neurotransmitter is most associated with Parkinson's disease?",
                        options: [
                            "A) Acetylcholine",
                            "B) Dopamine",
                            "C) GABA",
                            "D) Glutamate",
                            "E) Serotonin"
                        ],
                        answer: "B) Dopamine"
                    },
                    {
                        question: "The mechanism of action of benzodiazepines involves:",
                        options: [
                            "A) Blocking GABA receptors",
                            "B) Enhancing GABA action at GABAA receptors",
                            "C) Blocking dopamine receptors",
                            "D) Inhibiting acetylcholinesterase",
                            "E) Blocking glutamate receptors"
                        ],
                        answer: "B) Enhancing GABA action at GABAA receptors"
                    },
                    {
                        question: "Local anesthetics like lidocaine work primarily by:",
                        options: [
                            "A) Blocking calcium channels",
                            "B) Blocking potassium channels",
                            "C) Blocking sodium channels",
                            "D) Enhancing GABA action",
                            "E) Blocking acetylcholine receptors"
                        ],
                        answer: "C) Blocking sodium channels"
                    },
                    {
                        question: "Which of the following contributes to the development of tolerance to opioid analgesics?",
                        options: [
                            "A) Up-regulation of opioid receptors",
                            "B) Increased synthesis of endogenous opioids",
                            "C) Down-regulation and desensitization of opioid receptors",
                            "D) Decreased metabolism of opioids",
                            "E) Increased blood-brain barrier permeability"
                        ],
                        answer: "C) Down-regulation and desensitization of opioid receptors"
                    }
                ]
            },
            {
                title: "RESPIRATORY PHYSIOLOGY AND PHARMACOLOGY",
                questions: [
                     {
                        question: "The primary stimulus for ventilation during moderate exercise is:",
                        options: [
                            "A) Decreased PaO2",
                            "B) Increased PaCO2",
                            "C) Decreased pH",
                            "D) Neural input from exercising muscles and motor cortex",
                            "E) Increased body temperature"
                        ],
                        answer: "D) Neural input from exercising muscles and motor cortex"
                    },
                    {
                        question: "Hypoxic pulmonary vasoconstriction serves to:",
                        options: [
                            "A) Increase total pulmonary blood flow",
                            "B) Decrease pulmonary arterial pressure",
                            "C) Improve ventilation-perfusion matching",
                            "D) Prevent pulmonary edema",
                            "E) Decrease right ventricular workload"
                        ],
                        answer: "C) Improve ventilation-perfusion matching"
                    },
                    {
                        question: "Which of the following most directly controls the respiratory rhythm?",
                        options: [
                            "A) Cerebral cortex",
                            "B) Cerebellum",
                            "C) Medullary respiratory centers",
                            "D) Pons",
                            "E) Hypothalamus"
                        ],
                        answer: "C) Medullary respiratory centers"
                    },
                    {
                        question: "Long-term oxygen therapy in chronic obstructive pulmonary disease (COPD) has been shown to:",
                        options: [
                            "A) Improve lung function",
                            "B) Reverse airflow obstruction",
                            "C) Improve exercise tolerance",
                            "D) Improve survival",
                            "E) Reduce exacerbation frequency"
                        ],
                        answer: "D) Improve survival"
                    },
                    {
                        question: "The primary mechanism of action of beta-2 agonists in asthma is:",
                        options: [
                            "A) Anti-inflammatory effect",
                            "B) Bronchial smooth muscle relaxation",
                            "C) Decreased mucus production",
                            "D) Immunosuppression",
                            "E) Inhibition of mast cell degranulation"
                        ],
                        answer: "B) Bronchial smooth muscle relaxation"
                    }
                ]
            },
            {
                title: "PHYSIOLOGICAL RESPONSE TO STRESS AND EXERCISE",
                questions: [
                     {
                        question: "During the acute stress response, which of the following does NOT occur?",
                        options: [
                            "A) Increased heart rate",
                            "B) Increased blood glucose",
                            "C) Increased gastrointestinal motility",
                            "D) Increased blood pressure",
                            "E) Increased pupillary dilation"
                        ],
                        answer: "C) Increased gastrointestinal motility"
                    },
                    {
                        question: "Which hormone mediates the \"fight or flight\" response?",
                        options: [
                            "A) Cortisol",
                            "B) Epinephrine",
                            "C) Aldosterone",
                            "D) Thyroxine",
                            "E) Growth hormone"
                        ],
                        answer: "B) Epinephrine"
                    },
                    {
                        question: "During prolonged moderate-intensity exercise, the primary source of energy is:",
                        options: [
                            "A) Creatine phosphate",
                            "B) Anaerobic glycolysis",
                            "C) Aerobic metabolism of carbohydrates",
                            "D) Aerobic metabolism of proteins",
                            "E) Anaerobic metabolism of fats"
                        ],
                        answer: "C) Aerobic metabolism of carbohydrates"
                    },
                    {
                        question: "The ventilatory threshold during incremental exercise is associated with:",
                        options: [
                            "A) A decrease in oxygen consumption",
                            "B) A decrease in carbon dioxide production",
                            "C) A non-linear increase in ventilation relative to oxygen consumption",
                            "D) A linear increase in ventilation relative to carbon dioxide production",
                            "E) A decrease in respiratory exchange ratio"
                        ],
                        answer: "C) A non-linear increase in ventilation relative to oxygen consumption"
                    },
                    {
                        question: "During high-intensity exercise, blood flow to which organ is most reduced?",
                        options: [
                            "A) Brain",
                            "B) Heart",
                            "C) Skin",
                            "D) Working skeletal muscle",
                            "E) Gastrointestinal tract"
                        ],
                        answer: "E) Gastrointestinal tract"
                    }
                ]
            },
             {
                title: "SPECIAL SENSORY PHYSIOLOGY",
                questions: [
                    {
                        question: "The primary sensory cells for hearing are:",
                        options: [
                            "A) Inner hair cells",
                            "B) Outer hair cells",
                            "C) Support cells",
                            "D) Vestibular hair cells",
                            "E) Auditory neurons"
                        ],
                        answer: "A) Inner hair cells"
                    },
                    {
                        question: "Sound localization in the horizontal plane primarily depends on:",
                        options: [
                            "A) Intensity differences only",
                            "B) Time differences only",
                            "C) Both intensity and time differences",
                            "D) Sound frequency only",
                            "E) Phase differences only"
                        ],
                        answer: "C) Both intensity and time differences"
                    },
                    {
                        question: "The vestibulo-ocular reflex functions to:",
                        options: [
                            "A) Control pupil size",
                            "B) Adjust lens shape for focusing",
                            "C) Stabilize images on the retina during head movement",
                            "D) Coordinate head and eye movements during tracking",
                            "E) Maintain appropriate light adaptation"
                        ],
                        answer: "C) Stabilize images on the retina during head movement"
                    },
                    {
                        question: "Ototoxic drugs like aminoglycoside antibiotics primarily damage:",
                        options: [
                            "A) The auditory nerve",
                            "B) The hair cells in the cochlea",
                            "C) The tympanic membrane",
                            "D) The auditory cortex",
                            "E) The middle ear structures"
                        ],
                        answer: "B) The hair cells in the cochlea"
                    },
                    {
                        question: "The receptor for taste sensation \"umami\" is primarily stimulated by:",
                        options: [
                            "A) Sodium ions",
                            "B) Hydrogen ions",
                            "C) Glutamate",
                            "D) Glucose",
                            "E) Quinine"
                        ],
                        answer: "C) Glutamate"
                    }
                ]
            },
             {
                title: "TEMPERATURE REGULATION",
                questions: [
                     {
                        question: "The primary thermoregulatory center in the brain is located in the:",
                        options: [
                            "A) Cerebral cortex",
                            "B) Thalamus",
                            "C) Hypothalamus",
                            "D) Medulla",
                            "E) Cerebellum"
                        ],
                        answer: "C) Hypothalamus"
                    },
                    {
                        question: "Non-shivering thermogenesis in adult humans occurs primarily in:",
                        options: [
                            "A) White adipose tissue",
                            "B) Brown adipose tissue",
                            "C) Skeletal muscle",
                            "D) Liver",
                            "E) Brain"
                        ],
                        answer: "B) Brown adipose tissue"
                    },
                     {
                        question: "The primary mechanism of heat loss in hot environments is:",
                        options: [
                            "A) Conduction",
                            "B) Convection",
                            "C) Radiation",
                            "D) Evaporation",
                            "E) Respiration"
                        ],
                        answer: "D) Evaporation"
                    },
                     {
                        question: "Heat stroke is characterized by:",
                        options: [
                            "A) Core temperature below 35°C",
                            "B) Core temperature above 40°C with CNS dysfunction",
                            "C) Increased heat production with normal core temperature",
                            "D) Decreased heat loss with normal core temperature",
                            "E) Normal core temperature with sweating"
                        ],
                        answer: "B) Core temperature above 40°C with CNS dysfunction"
                    },
                     {
                        question: "Malignant hyperthermia is a rare complication associated with:",
                        options: [
                            "A) NSAIDs",
                            "B) Opioid analgesics",
                            "C) General anesthetics",
                            "D) Antibiotics",
                            "E) Antihypertensives"
                        ],
                        answer: "C) General anesthetics"
                    }
                ]
            },
            {
                title: "AGING PHYSIOLOGY",
                questions: [
                     {
                        question: "Which of the following is NOT a normal physiological change associated with aging?",
                        options: [
                            "A) Decreased glomerular filtration rate",
                            "B) Increased arterial compliance",
                            "C) Decreased vital capacity",
                            "D) Decreased basal metabolic rate",
                            "E) Decreased baroreceptor sensitivity"
                        ],
                        answer: "B) Increased arterial compliance"
                    },
                    {
                        question: "The age-related decline in immune function is characterized by:",
                        options: [
                            "A) Increased antibody production",
                            "B) Increased T-cell function",
                            "C) Decreased inflammatory responses",
                            "D) Thymic involution and reduced naive T-cell production",
                            "E) Enhanced vaccine responses"
                        ],
                        answer: "D) Thymic involution and reduced naive T-cell production"
                    },
                    {
                        question: "Pharmacokinetic changes in elderly patients typically include:",
                        options: [
                            "A) Increased gastric emptying",
                            "B) Decreased body fat percentage",
                            "C) Increased renal drug clearance",
                            "D) Decreased plasma protein binding",
                            "E) Increased first-pass metabolism"
                        ],
                        answer: "D) Decreased plasma protein binding"
                    },
                    {
                        question: "Age-related changes in the cardiovascular system include:",
                        options: [
                            "A) Decreased left ventricular wall thickness",
                            "B) Increased maximal heart rate",
                            "C) Decreased arterial stiffness",
                            "D) Decreased systolic blood pressure",
                            "E) Increased ventricular compliance"
                        ],
                        answer: "A) Decreased left ventricular wall thickness"
                    },
                    {
                        question: "Which of the following is a common age-related change in the endocrine system?",
                        options: [
                            "A) Increased growth hormone secretion",
                            "B) Increased testosterone in males",
                            "C) Decreased insulin resistance",
                            "D) Decreased thyroid-binding globulin",
                            "E) Decreased adrenal androgen production"
                        ],
                        answer: "E) Decreased adrenal androgen production"
                    }
                ]
            },
            {
                title: "PATHOPHYSIOLOGY OF COMMON DISEASES",
                questions: [
                     {
                        question: "The primary pathophysiological mechanism in congestive heart failure is:",
                        options: [
                            "A) Increased cardiac output",
                            "B) Decreased preload",
                            "C) Inadequate cardiac output leading to compensatory mechanisms",
                            "D) Decreased systemic vascular resistance",
                            "E) Decreased blood volume"
                        ],
                        answer: "C) Inadequate cardiac output leading to compensatory mechanisms"
                    },
                     {
                        question: "Which of the following best characterizes type 2 diabetes mellitus?",
                        options: [
                            "A) Absolute insulin deficiency",
                            "B) Autoimmune destruction of pancreatic beta cells",
                            "C) Insulin resistance with relative insulin deficiency",
                            "D) Excessive insulin secretion",
                            "E) Normal insulin sensitivity with reduced insulin secretion"
                        ],
                        answer: "C) Insulin resistance with relative insulin deficiency"
                    },
                    {
                        question: "The pathophysiology of bronchial asthma involves:",
                        options: [
                            "A) Airway inflammation, hyperresponsiveness, and obstruction",
                            "B) Destruction of alveolar walls",
                            "C) Decreased lung compliance",
                            "D) Increased pulmonary vascular resistance",
                            "E) Restrictive lung disease"
                        ],
                        answer: "A) Airway inflammation, hyperresponsiveness, and obstruction"
                    },
                    {
                        question: "The primary pathophysiological mechanism in acute pancreatitis is:",
                        options: [
                            "A) Autoimmune destruction of pancreatic cells",
                            "B) Premature activation of pancreatic enzymes",
                            "C) Pancreatic duct obstruction",
                            "D) Pancreatic islet cell tumor",
                            "E) Bacterial infection of the pancreas"
                        ],
                        answer: "B) Premature activation of pancreatic enzymes"
                    },
                     {
                        question: "The pathophysiology of hypertension most commonly involves:",
                        options: [
                            "A) Increased cardiac output only",
                            "B) Increased systemic vascular resistance only",
                            "C) Complex interplay of multiple mechanisms",
                            "D) Single gene mutation",
                            "E) Decreased renal blood flow only"
                        ],
                        answer: "C) Complex interplay of multiple mechanisms"
                    }
                ]
            },
             {
                title: "REPRODUCTIVE PHYSIOLOGY AND PHARMACOLOGY (ADDITIONAL QUESTIONS)",
                questions: [
                    {
                        question: "During the female menstrual cycle, ovulation is triggered by:",
                        options: [
                            "A) A surge in progesterone",
                            "B) A surge in luteinizing hormone (LH)",
                            "C) A drop in estrogen levels",
                            "D) A drop in follicle-stimulating hormone (FSH)",
                            "E) A surge in human chorionic gonadotropin (hCG)"
                        ],
                        answer: "B) A surge in luteinizing hormone (LH)"
                    },
                    {
                        question: "The corpus luteum primarily secretes:",
                        options: [
                            "A) Estrogen",
                            "B) Progesterone",
                            "C) Luteinizing hormone",
                            "D) Follicle-stimulating hormone",
                            "E) Both A and B"
                        ],
                        answer: "E) Both A and B"
                    },
                    {
                        question: "Which of the following events occurs first during fertilization?",
                        options: [
                            "A) Formation of male and female pronuclei",
                            "B) Cortical reaction to prevent polyspermy",
                            "C) Acrosome reaction in sperm",
                            "D) Fusion of male and female pronuclei",
                            "E) Implantation of the blastocyst"
                        ],
                        answer: "C) Acrosome reaction in sperm"
                    },
                    {
                        question: "The zona pellucida surrounding the oocyte:",
                        options: [
                            "A) Is produced by the corpus luteum",
                            "B) Is composed of glycoproteins",
                            "C) Completely dissolves immediately after fertilization",
                            "D) Contains sperm-specific receptors only on its inner surface",
                            "E) Is formed just before ovulation"
                        ],
                        answer: "B) Is composed of glycoproteins"
                    },
                    {
                        question: "During implantation, the blastocyst primarily attaches to the uterine endometrium via:",
                        options: [
                            "A) Syncytiotrophoblast cells",
                            "B) Inner cell mass",
                            "C) Zona pellucida",
                            "D) Cytotrophoblast cells",
                            "E) Blastocoel fluid"
                        ],
                        answer: "A) Syncytiotrophoblast cells"
                    },
                    {
                        question: "The placenta becomes the main source of progesterone during pregnancy at approximately:",
                        options: [
                            "A) 2 weeks gestation",
                            "B) 8-10 weeks gestation",
                            "C) 20 weeks gestation",
                            "D) 30 weeks gestation",
                            "E) 36 weeks gestation"
                        ],
                        answer: "B) 8-10 weeks gestation"
                    },
                    {
                        question: "Human chorionic gonadotropin (hCG) in early pregnancy functions to:",
                        options: [
                            "A) Stimulate maternal thyroid hormone production",
                            "B) Inhibit the maternal immune system",
                            "C) Stimulate the corpus luteum to produce progesterone",
                            "D) Initiate uterine contractions",
                            "E) Promote fetal lung maturation"
                        ],
                        answer: "C) Stimulate the corpus luteum to produce progesterone"
                    },
                    {
                        question: "Which of the following hormones increases gap junction formation in uterine smooth muscle near term?",
                        options: [
                            "A) Progesterone",
                            "B) Estrogen",
                            "C) Relaxin",
                            "D) Human placental lactogen",
                            "E) Human chorionic gonadotropin"
                        ],
                        answer: "B) Estrogen"
                    },
                    {
                        question: "Prostaglandins in parturition function to:",
                        options: [
                            "A) Maintain uterine quiescence throughout pregnancy",
                            "B) Inhibit uterine contractions",
                            "C) Induce cervical ripening and stimulate uterine contractions",
                            "D) Maintain high progesterone levels",
                            "E) Decrease oxytocin receptor expression"
                        ],
                        answer: "C) Induce cervical ripening and stimulate uterine contractions"
                    },
                    {
                        question: "The Ferguson reflex refers to:",
                        options: [
                            "A) The push reflex during the second stage of labor",
                            "B) The production of oxytocin during breast feeding",
                            "C) The stretch-induced release of oxytocin from the posterior pituitary during cervical dilation",
                            "D) The inhibition of uterine contractions during early labor",
                            "E) The dilation of blood vessels during pregnancy"
                        ],
                        answer: "C) The stretch-induced release of oxytocin from the posterior pituitary during cervical dilation"
                    },
                    {
                        question: "Which of the following best describes the mechanism of action of oxytocin during labor?",
                        options: [
                            "A) Increases calcium uptake by uterine smooth muscle cells",
                            "B) Blocks potassium channels in uterine smooth muscle",
                            "C) Induces relaxation of uterine smooth muscle",
                            "D) Increases intracellular calcium in uterine smooth muscle cells",
                            "E) Blocks calcium channels in uterine smooth muscle"
                        ],
                        answer: "D) Increases intracellular calcium in uterine smooth muscle cells"
                    },
                     {
                        question: "Prolactin's primary function is to:",
                        options: [
                            "A) Stimulate uterine contractions during labor",
                            "B) Stimulate milk production in the mammary gland",
                            "C) Maintain the corpus luteum during early pregnancy",
                            "D) Stimulate ovulation",
                            "E) Regulate the menstrual cycle"
                        ],
                        answer: "B) Stimulate milk production in the mammary gland"
                    },
                    {
                        question: "The milk ejection reflex is initiated by:",
                        options: [
                            "A) Prolactin",
                            "B) Estrogen",
                            "C) Progesterone",
                            "D) Oxytocin",
                            "E) Human placental lactogen"
                        ],
                        answer: "D) Oxytocin"
                    },
                    {
                        question: "Which hormone inhibits prolactin secretion from the anterior pituitary?",
                        options: [
                            "A) Thyroid-stimulating hormone",
                            "B) Dopamine",
                            "C) Oxytocin",
                            "D) Growth hormone",
                            "E) Thyroxine"
                        ],
                        answer: "B) Dopamine"
                    },
                    {
                        question: "The primary mechanism of action of combined oral contraceptives is:",
                        options: [
                            "A) Blocking implantation",
                            "B) Inhibiting fertilization",
                            "C) Inhibiting ovulation",
                            "D) Creating a hostile cervical mucus",
                            "E) Inducing early abortion"
                        ],
                        answer: "C) Inhibiting ovulation"
                    },
                    {
                        question: "Mifepristone (RU-486) acts as:",
                        options: [
                            "A) A progesterone receptor antagonist",
                            "B) An estrogen receptor antagonist",
                            "C) A gonadotropin-releasing hormone (GnRH) agonist",
                            "D) A gonadotropin-releasing hormone (GnRH) antagonist",
                            "E) A prostaglandin analogue"
                        ],
                        answer: "A) A progesterone receptor antagonist"
                    },
                     {
                        question: "Testosterone is primarily produced by:",
                        options: [
                            "A) Sertoli cells",
                            "B) Leydig cells",
                            "C) Seminiferous tubules",
                            "D) Prostate gland",
                            "E) Epididymis"
                        ],
                        answer: "B) Leydig cells"
                    },
                     {
                        question: "The primary function of Sertoli cells in the testes is:",
                        options: [
                            "A) Production of testosterone",
                            "B) Production of inhibin",
                            "C) Support and nourishment of developing sperm cells",
                            "D) Storage of mature sperm",
                            "E) Production of seminal fluid"
                        ],
                        answer: "C) Support and nourishment of developing sperm cells"
                    },
                    {
                        question: "Dihydrotestosterone (DHT) is formed from testosterone by the action of:",
                        options: [
                            "A) 5a-reductase",
                            "B) Aromatase",
                            "C) 17β-hydroxysteroid dehydrogenase",
                            "D) 3β-hydroxysteroid dehydrogenase",
                            "E) 11β-hydroxysteroid dehydrogenase"
                        ],
                        answer: "A) 5a-reductase"
                    },
                    {
                        question: "In the male, follicle-stimulating hormone (FSH) primarily acts on:",
                        options: [
                            "A) Leydig cells",
                            "B) Sertoli cells",
                            "C) Epididymis",
                            "D) Seminal vesicles",
                            "E) Prostate gland"
                        ],
                        answer: "B) Sertoli cells"
                    },
                     {
                        question: "The maturation of sperm cells in the epididymis results in:",
                        options: [
                            "A) Acquisition of fertilizing capacity",
                            "B) Completion of meiosis",
                            "C) Loss of the acrosome",
                            "D) Development of the midpiece",
                            "E) Formation of the head"
                        ],
                        answer: "A) Acquisition of fertilizing capacity"
                    },
                    {
                        question: "In polycystic ovarian syndrome (PCOS), which hormone is typically elevated?",
                        options: [
                            "A) Estrogen",
                            "B) Progesterone",
                            "C) Follicle-stimulating hormone",
                            "D) Androgens",
                            "E) Human chorionic gonadotropin"
                        ],
                        answer: "D) Androgens"
                    },
                    {
                        question: "The enzyme aromatase is responsible for:",
                        options: [
                            "A) Converting testosterone to dihydrotestosterone",
                            "B) Converting androgens to estrogens",
                            "C) Converting progesterone to testosterone",
                            "D) Converting estrogens to androgens",
                            "E) Converting cholesterol to pregnenolone"
                        ],
                        answer: "B) Converting androgens to estrogens"
                    },
                    {
                        question: "Which of the following drugs is a selective estrogen receptor modulator (SERM)?",
                        options: [
                            "A) Mifepristone",
                            "B) Tamoxifen",
                            "C) Finasteride",
                            "D) Leuprolide",
                            "E) Medroxyprogesterone"
                        ],
                        answer: "B) Tamoxifen"
                    },
                    {
                        question: "Phosphodiesterase type 5 (PDE5) inhibitors like sildenafil work by:",
                        options: [
                            "A) Increasing testosterone levels",
                            "B) Inhibiting alpha-adrenergic receptors",
                            "C) Preventing the breakdown of cGMP, prolonging smooth muscle relaxation",
                            "D) Stimulating dopamine receptors",
                            "E) Directly releasing nitric oxide"
                        ],
                        answer: "C) Preventing the breakdown of cGMP, prolonging smooth muscle relaxation"
                    }
                ]
            },
            {
                title: "CARDIOVASCULAR PHARMACOLOGY",
                questions: [
                    {
                        question: "Beta-blockers reduce the severity of angina primarily by:",
                        options: [
                            "A) Dilating coronary arteries",
                            "B) Reducing cardiac work and oxygen demand",
                            "C) Increasing coronary blood flow",
                            "D) Decreasing platelet aggregation",
                            "E) Increasing oxygen delivery to the myocardium"
                        ],
                        answer: "B) Reducing cardiac work and oxygen demand"
                    },
                    {
                        question: "Which drug class may cause a persistent dry cough as a side effect?",
                        options: [
                            "A) Angiotensin receptor blockers",
                            "B) Beta-blockers",
                            "C) Calcium channel blockers",
                            "D) ACE inhibitors",
                            "E) Thiazide diuretics"
                        ],
                        answer: "D) ACE inhibitors"
                    },
                     {
                        question: "Which of the following drugs would be most appropriate for acute treatment of severe heart failure with hypotension?",
                        options: [
                            "A) Atenolol",
                            "B) Dobutamine",
                            "C) Enalapril",
                            "D) Furosemide",
                            "E) Verapamil"
                        ],
                        answer: "B) Dobutamine"
                    },
                     {
                        question: "The primary mechanism of action of glyceryl trinitrate (nitroglycerin) in angina is:",
                        options: [
                            "A) Increasing coronary blood flow through vasodilation",
                            "B) Decreasing afterload",
                            "C) Decreasing preload",
                            "D) Both B and C",
                            "E) Decreasing heart rate"
                        ],
                        answer: "D) Both B and C"
                    },
                    {
                        question: "Which of the following is NOT a calcium channel blocker?",
                        options: [
                            "A) Amlodipine",
                            "B) Diltiazem",
                            "C) Nifedipine",
                            "D) Propranolol",
                            "E) Verapamil"
                        ],
                        answer: "D) Propranolol"
                    },
                    {
                        question: "The mechanism by which organic nitrates (e.g., glyceryl trinitrate) dilate blood vessels involves:",
                        options: [
                            "A) Calcium channel blockade",
                            "B) Alpha-adrenergic receptor blockade",
                            "C) Release of nitric oxide",
                            "D) Activation of the renin-angiotensin system",
                            "E) Potassium channel blockade"
                        ],
                        answer: "C) Release of nitric oxide"
                    },
                    {
                        question: "Which drug is an angiotensin II receptor antagonist?",
                        options: [
                            "A) Captopril",
                            "B) Enalapril",
                            "C) Losartan",
                            "D) Ramipril",
                            "E) Spironolactone"
                        ],
                        answer: "C) Losartan"
                    },
                    {
                        question: "The primary mechanism of action of digoxin in heart failure is:",
                        options: [
                            "A) Inhibition of Na+/K+ ATPase",
                            "B) Beta-adrenergic receptor blockade",
                            "C) Calcium channel blockade",
                            "D) ACE inhibition",
                            "E) Phosphodiesterase inhibition"
                        ],
                        answer: "A) Inhibition of Na+/K+ ATPase"
                    },
                    {
                        question: "Which drug class is most likely to cause a persistent dry cough as a side effect?",
                        options: [
                            "A) Angiotensin receptor blockers",
                            "B) Beta-blockers",
                            "C) Calcium channel blockers",
                            "D) ACE inhibitors",
                            "E) Thiazide diuretics"
                        ],
                        answer: "D) ACE inhibitors"
                    }
                ]
            },
            {
                title: "THE HYPOTHALAMO-PITUITARY-ADRENAL AXIS",
                questions: [
                     {
                        question: "The hypothalamo-pituitary-adrenal (HPA) axis consists of:",
                        options: [
                            "A) Hypothalamus, posterior pituitary, and adrenal medulla",
                            "B) Hypothalamus, anterior pituitary, and adrenal cortex",
                            "C) Hippocampus, posterior pituitary, and adrenal cortex",
                            "D) Hippocampus, anterior pituitary, and adrenal medulla",
                            "E) Hypothalamus, pituitary, and adrenal medulla"
                        ],
                        answer: "B) Hypothalamus, anterior pituitary, and adrenal cortex"
                    },
                    {
                        question: "Chronic activation of the HPA axis can lead to:",
                        options: [
                            "A) Decreased blood glucose concentration",
                            "B) Increased immune function",
                            "C) Increased bone formation",
                            "D) Muscle hypertrophy",
                            "E) Suppression of inflammatory responses"
                        ],
                        answer: "E) Suppression of inflammatory responses"
                    },
                     {
                        question: "Cortisol affects glucose metabolism by:",
                        options: [
                            "A) Increasing insulin secretion",
                            "B) Decreasing gluconeogenesis",
                            "C) Promoting glucose uptake in muscle",
                            "D) Promoting glycogenolysis and gluconeogenesis",
                            "E) Inhibiting glycogen breakdown"
                        ],
                        answer: "D) Promoting glycogenolysis and gluconeogenesis"
                    },
                     {
                        question: "Physiological responses to stress include:",
                        options: [
                            "A) Decreased blood glucose, increased immune function",
                            "B) Increased blood glucose, suppressed immune function",
                            "C) Decreased blood glucose, suppressed immune function",
                            "D) Increased blood glucose, increased immune function",
                            "E) No change in blood glucose, suppressed immune function"
                        ],
                        answer: "B) Increased blood glucose, suppressed immune function"
                    },
                    {
                        question: "The primary hormone that mediates the effects of chronic stress on blood glucose levels is:",
                        options: [
                            "A) ACTH",
                            "B) Aldosterone",
                            "C) Cortisol",
                            "D) CRH",
                            "E) Epinephrine"
                        ],
                        answer: "C) Cortisol"
                    }
                ]
            },
            {
                title: "DRUG INTERACTIONS AND PHARMACODYNAMICS",
                questions: [
                     {
                        question: "Beta-adrenergic antagonists and calcium channel blockers may cause an adverse interaction resulting in:",
                        options: [
                            "A) Hypertension",
                            "B) Tachycardia",
                            "C) Severe bradycardia and heart block",
                            "D) Hyperglycemia",
                            "E) Respiratory stimulation"
                        ],
                        answer: "C) Severe bradycardia and heart block"
                    },
                    {
                        question: "Which of the following drug combinations could potentially increase the risk of hyperkalemia?",
                        options: [
                            "A) ACE inhibitors and thiazide diuretics",
                            "B) ACE inhibitors and potassium-sparing diuretics",
                            "C) Beta-blockers and thiazide diuretics",
                            "D) Calcium channel blockers and loop diuretics",
                            "E) Nitrates and beta-blockers"
                        ],
                        answer: "B) ACE inhibitors and potassium-sparing diuretics"
                    },
                     {
                        question: "The mechanism of drug tolerance is best described as:",
                        options: [
                            "A) Decreased absorption of the drug",
                            "B) Increased excretion of the drug",
                            "C) Decreased receptor sensitivity to the drug",
                            "D) Decreased metabolism of the drug",
                            "E) Irreversible binding to the receptor"
                        ],
                        answer: "C) Decreased receptor sensitivity to the drug"
                    },
                     {
                        question: "Which of the following classes of drugs displays a ceiling effect, where increasing the dose beyond a certain point produces no additional therapeutic effect?",
                        options: [
                            "A) ACE inhibitors",
                            "B) Beta-blockers",
                            "C) Calcium channel blockers",
                            "D) NSAIDs",
                            "E) Opioid analgesics"
                        ],
                        answer: "D) NSAIDs"
                    },
                    {
                        question: "The term \"first-pass metabolism\" refers to:",
                        options: [
                            "A) The initial absorption of a drug from the GI tract",
                            "B) The metabolism of a drug before it reaches systemic circulation",
                            "C) The first cycle of distribution of a drug throughout the body",
                            "D) The initial binding of a drug to plasma proteins",
                            "E) The first phase of renal excretion of a drug"
                        ],
                        answer: "B) The metabolism of a drug before it reaches systemic circulation"
                    }
                ]
            },
            {
                title: "BODY TEMPERATURE REGULATION",
                questions: [
                    {
                        question: "The body's thermoneutral zone is defined as:",
                        options: [
                            "A) The range of environmental temperatures at which basal metabolic rate is minimal",
                            "B) The range of core temperatures that triggers sweating",
                            "C) The range of environmental temperatures at which neither heat production nor active heat loss mechanisms are required",
                            "D) The range of core temperatures that triggers shivering",
                            "E) The range of environmental temperatures at which both sweating and shivering occur"
                        ],
                        answer: "C) The range of environmental temperatures at which neither heat production nor active heat loss mechanisms are required"
                    },
                    {
                        question: "Which of the following is not a mechanism of heat loss from the body?",
                        options: [
                            "A) Conduction",
                            "B) Convection",
                            "C) Evaporation",
                            "D) Radiation",
                            "E) Thermogenesis"
                        ],
                        answer: "E) Thermogenesis"
                    },
                     {
                        question: "Hyperthermia differs from fever in that:",
                        options: [
                            "A) It involves a reset of the hypothalamic thermostat",
                            "B) It results from failure of thermoregulatory mechanisms",
                            "C) It is always associated with infection",
                            "D) It typically responds to antipyretic medications",
                            "E) It is always associated with dehydration"
                        ],
                        answer: "B) It results from failure of thermoregulatory mechanisms"
                    },
                     {
                        question: "The main site of non-shivering thermogenesis in humans is:",
                        options: [
                            "A) White adipose tissue",
                            "B) Brown adipose tissue",
                            "C) Skeletal muscle",
                            "D) Liver",
                            "E) Skin"
                        ],
                        answer: "B) Brown adipose tissue"
                    },
                    {
                        question: "Aspirin reduces fever primarily by:",
                        options: [
                            "A) Blocking heat production in brown adipose tissue",
                            "B) Stimulating sweat gland activity",
                            "C) Inhibiting cyclooxygenase and prostaglandin synthesis",
                            "D) Directly inhibiting bacterial growth",
                            "E) Reducing hypothalamic blood flow"
                        ],
                        answer: "C) Inhibiting cyclooxygenase and prostaglandin synthesis"
                    }
                ]
            },
             {
                title: "ENDOTHELIAL FUNCTION AND VASCULAR REGULATION",
                questions: [
                    {
                        question: "Nitric oxide produced by endothelial cells causes vascular smooth muscle relaxation by:",
                        options: [
                            "A) Activating adenylyl cyclase",
                            "B) Activating guanylyl cyclase",
                            "C) Inhibiting calcium channels",
                            "D) Activating potassium channels",
                            "E) Inhibiting myosin light chain kinase"
                        ],
                        answer: "B) Activating guanylyl cyclase"
                    },
                    {
                        question: "Endothelial dysfunction is characterized by:",
                        options: [
                            "A) Increased nitric oxide production",
                            "B) Decreased superoxide production",
                            "C) Increased prostacyclin production",
                            "D) Impaired vasodilation and increased thrombotic tendency",
                            "E) Decreased expression of adhesion molecules"
                        ],
                        answer: "D) Impaired vasodilation and increased thrombotic tendency"
                    },
                    {
                        question: "The immediate precursor for nitric oxide synthesis in endothelial cells is:",
                        options: [
                            "A) Arginine",
                            "B) Citrulline",
                            "C) Lysine",
                            "D) Ornithine",
                            "E) Glutamine"
                        ],
                        answer: "A) Arginine"
                    },
                    {
                        question: "Nitric oxide synthesis in endothelial cells is stimulated by:",
                        options: [
                            "A) Sympathetic stimulation",
                            "B) Parasympathetic inhibition",
                            "C) Shear stress",
                            "D) Hyperoxia",
                            "E) Reduced plasma potassium"
                        ],
                        answer: "C) Shear stress"
                    },
                    {
                        question: "Sildenafil (Viagra) enhances the effects of nitric oxide by:",
                        options: [
                            "A) Increasing nitric oxide synthesis",
                            "B) Inhibiting phosphodiesterase type 5",
                            "C) Activating guanylyl cyclase",
                            "D) Inhibiting cyclooxygenase",
                            "E) Activating adenylyl cyclase"
                        ],
                        answer: "B) Inhibiting phosphodiesterase type 5"
                    }
                ]
            },
             {
                title: "ACID-BASE BALANCE IN PHYSIOLOGY AND DISEASE",
                questions: [
                     {
                        question: "In the Henderson-Hasselbalch equation (pH = pKa + log[HCO3-]/[CO2]), pKa represents:",
                        options: [
                            "A) Arterial partial pressure of CO2",
                            "B) Dissociation constant of carbonic acid",
                            "C) Venous bicarbonate concentration",
                            "D) Log[H+]",
                            "E) Aqueous solubility coefficient of CO2"
                        ],
                        answer: "B) Dissociation constant of carbonic acid"
                    },
                     {
                        question: "Metabolic alkalosis can be caused by:",
                        options: [
                            "A) Diarrhea",
                            "B) Diabetic ketoacidosis",
                            "C) Vomiting",
                            "D) Renal failure",
                            "E) Salicylate poisoning"
                        ],
                        answer: "C) Vomiting"
                    },
                    {
                        question: "The primary respiratory compensation for metabolic acidosis is:",
                        options: [
                            "A) Increased ventilation",
                            "B) Decreased ventilation",
                            "C) Increased renal bicarbonate reabsorption",
                            "D) Decreased renal bicarbonate reabsorption",
                            "E) Increased ammonia production"
                        ],
                        answer: "A) Increased ventilation"
                    },
                    {
                        question: "In a Davenport diagram, respiratory acidosis is represented by:",
                        options: [
                            "A) Decreased pH, decreased bicarbonate",
                            "B) Decreased pH, increased bicarbonate",
                            "C) Increased pH, decreased bicarbonate",
                            "D) Increased pH, increased bicarbonate",
                            "E) Normal pH, decreased bicarbonate"
                        ],
                        answer: "B) Decreased pH, increased bicarbonate"
                    },
                    {
                        question: "The primary buffer system in extracellular fluid is:",
                        options: [
                            "A) Phosphate buffer system",
                            "B) Protein buffer system",
                            "C) Bicarbonate-carbonic acid buffer system",
                            "D) Hemoglobin buffer system",
                            "E) Ammonia buffer system"
                        ],
                        answer: "C) Bicarbonate-carbonic acid buffer system"
                    }
                ]
            },
             {
                title: "CARDIAC OUTPUT AND BLOOD PRESSURE REGULATION",
                questions: [
                    {
                        question: "According to Guyton's model, cardiac output at equilibrium is determined by:",
                        options: [
                            "A) The intersection of the cardiac function curve and vascular function curve",
                            "B) Mean arterial pressure divided by total peripheral resistance",
                            "C) Stroke volume multiplied by heart rate",
                            "D) Central venous pressure only",
                            "E) Contractility of the heart only"
                        ],
                        answer: "A) The intersection of the cardiac function curve and vascular function curve"
                    },
                    {
                        question: "Mean circulatory pressure represents:",
                        options: [
                            "A) Mean arterial pressure",
                            "B) The pressure throughout the circulation if the heart were to stop and blood redistributed",
                            "C) The mean pressure in the central veins",
                            "D) The mean pressure in the pulmonary circulation",
                            "E) The average of systolic and diastolic pressures"
                        ],
                        answer: "B) The pressure throughout the circulation if the heart were to stop and blood redistributed"
                    },
                    {
                        question: "Total peripheral resistance is calculated as:",
                        options: [
                            "A) Heart rate × stroke volume",
                            "B) Mean arterial pressure / cardiac output",
                            "C) Central venous pressure / venous return",
                            "D) Mean arterial pressure × cardiac output",
                            "E) Central venous pressure - right atrial pressure"
                        ],
                        answer: "B) Mean arterial pressure / cardiac output"
                    },
                    {
                        question: "A sudden increase in total peripheral resistance will lead acutely to:",
                        options: [
                            "A) A rise in cardiac output",
                            "B) A fall in cardiac output",
                            "C) No change in cardiac output",
                            "D) A rise in central venous pressure only",
                            "E) A fall in arterial blood pressure"
                        ],
                        answer: "B) A fall in cardiac output"
                    },
                    {
                        question: "In the short term, arterial blood pressure is primarily maintained by:",
                        options: [
                            "A) The renin-angiotensin-aldosterone system",
                            "B) The baroreceptor reflex",
                            "C) Renal pressure natriuresis",
                            "D) Capillary fluid shift",
                            "E) The Frank-Starling mechanism"
                        ],
                        answer: "B) The baroreceptor reflex"
                    }
                ]
            },
            {
                title: "PHARMACOLOGY OF INFLAMMATION",
                questions: [
                     {
                        question: "Aspirin's anti-inflammatory effect is due to:",
                        options: [
                            "A) Inhibition of prostaglandin synthesis via COX inhibition",
                            "B) Activation of glucocorticoid receptors",
                            "C) Inhibition of histamine release",
                            "D) Inhibition of leukotriene synthesis",
                            "E) Antagonism of bradykinin receptors"
                        ],
                        answer: "A) Inhibition of prostaglandin synthesis via COX inhibition"
                    },
                    {
                        question: "Corticosteroids exert their anti-inflammatory effect primarily by:",
                        options: [
                            "A) Inhibiting cyclooxygenase enzymes",
                            "B) Inhibiting phospholipase A2 and modulating gene expression",
                            "C) Blocking histamine receptors",
                            "D) Blocking leukotriene receptors",
                            "E) Directly inhibiting neutrophil migration"
                        ],
                        answer: "B) Inhibiting phospholipase A2 and modulating gene expression"
                    },
                     {
                        question: "Which of the following is a potential adverse effect of long-term corticosteroid use?",
                        options: [
                            "A) Hypotension",
                            "B) Osteoporosis",
                            "C) Hypoglycemia",
                            "D) Decreased susceptibility to infection",
                            "E) Decreased adrenal cortex size due to upregulation"
                        ],
                        answer: "B) Osteoporosis"
                    },
                     {
                        question: "Selective COX-2 inhibitors were developed primarily to:",
                        options: [
                            "A) Increase anti-inflammatory efficacy compared to non-selective NSAIDs",
                            "B) Reduce gastrointestinal adverse effects of NSAIDs",
                            "C) Provide stronger analgesic effects than non-selective NSAIDs",
                            "D) Eliminate cardiovascular risks associated with NSAIDs",
                            "E) Provide longer duration of action than non-selective NSAIDs"
                        ],
                        answer: "B) Reduce gastrointestinal adverse effects of NSAIDs"
                    },
                    {
                        question: "Anti-TNF biologics used in rheumatoid arthritis:",
                        options: [
                            "A) Stimulate TNF receptors to induce immune tolerance",
                            "B) Block the binding of TNF to its receptors",
                            "C) Increase the production of anti-inflammatory cytokines",
                            "D) Directly inhibit neutrophil activation",
                            "E) Increase the metabolism of TNF"
                        ],
                        answer: "B) Block the binding of TNF to its receptors"
                    }
                ]
            },
             {
                title: "PULMONARY PHYSIOLOGY AND PATHOPHYSIOLOGY",
                questions: [
                    {
                        question: "Ventilation-perfusion matching in the lungs is primarily maintained by:",
                        options: [
                            "A) Hypoxic pulmonary vasoconstriction",
                            "B) Hypercapnic pulmonary vasoconstriction",
                            "C) Equal distribution of ventilation throughout the lungs",
                            "D) Equal distribution of perfusion throughout the lungs",
                            "E) Bronchoconstriction in poorly perfused areas"
                        ],
                        answer: "A) Hypoxic pulmonary vasoconstriction"
                    },
                    {
                        question: "The primary cause of hypoxemia in chronic obstructive pulmonary disease (COPD) is:",
                        options: [
                            "A) Diffusion limitation",
                            "B) Ventilation-perfusion mismatch",
                            "C) Right-to-left shunt",
                            "D) Decreased inspired oxygen",
                            "E) Hypoventilation"
                        ],
                        answer: "B) Ventilation-perfusion mismatch"
                    },
                    {
                        question: "Which of the following best defines the alveolar-arterial oxygen gradient (A-a gradient)?",
                        options: [
                            "A) The difference between inspired and expired oxygen",
                            "B) The difference between alveolar and arterial oxygen tension",
                            "C) The difference between arterial and venous oxygen tension",
                            "D) The difference between arterial and tissue oxygen tension",
                            "E) The ratio of ventilation to perfusion"
                        ],
                        answer: "B) The difference between alveolar and arterial oxygen tension"
                    },
                    {
                        question: "The dominant mechanism of bronchodilation by β2-adrenergic agonists is:",
                        options: [
                            "A) Increase in intracellular calcium",
                            "B) Decrease in intracellular calcium",
                            "C) Direct opening of potassium channels",
                            "D) Inhibition of acetylcholine release",
                            "E) Antagonism of muscarinic receptors"
                        ],
                        answer: "B) Decrease in intracellular calcium"
                    },
                    {
                        question: "In asthma, the main difference between short-acting and long-acting β2-agonists is:",
                        options: [
                            "A) The receptor they act on",
                            "B) Their mechanism of action",
                            "C) Their duration of action",
                            "D) Their route of administration",
                            "E) Their side effect profile"
                        ],
                        answer: "C) Their duration of action"
                    }
                ]
            },
             {
                title: "RENAL PHYSIOLOGY AND PHARMACOLOGY",
                questions: [
                     {
                        question: "The countercurrent multiplier system in the kidney is essential for:",
                        options: [
                            "A) Autoregulation of glomerular filtration rate",
                            "B) Concentrating urine",
                            "C) Diluting urine",
                            "D) Secretion of potassium",
                            "E) Reabsorption of glucose"
                        ],
                        answer: "B) Concentrating urine"
                    },
                    {
                        question: "Loop diuretics like furosemide primarily act by:",
                        options: [
                            "A) Inhibiting carbonic anhydrase",
                            "B) Blocking the Na-K-2Cl cotransporter in the thick ascending limb",
                            "C) Antagonizing aldosterone receptors",
                            "D) Blocking sodium channels in the collecting duct",
                            "E) Inhibiting the Na-Cl cotransporter in the distal tubule"
                        ],
                        answer: "B) Blocking the Na-K-2Cl cotransporter in the thick ascending limb"
                    },
                     {
                        question: "Glomerular filtration rate (GFR) is primarily determined by:",
                        options: [
                            "A) Hydrostatic pressure in Bowman's space",
                            "B) Glomerular capillary hydrostatic pressure",
                            "C) Oncotic pressure in Bowman's space",
                            "D) All of the above factors",
                            "E) None of the above factors"
                        ],
                        answer: "D) All of the above factors"
                    },
                     {
                        question: "Angiotensin II affects renal function by:",
                        options: [
                            "A) Decreasing efferent arteriolar resistance",
                            "B) Decreasing sodium reabsorption",
                            "C) Increasing afferent arteriolar resistance",
                            "D) Decreasing aldosterone secretion",
                            "E) Increasing medullary blood flow"
                        ],
                        answer: "C) Increasing afferent arteriolar resistance"
                    },
                    {
                        question: "Thiazide diuretics can cause:",
                        options: [
                            "A) Hyperkalemia",
                            "B) Hyperglycemia",
                            "C) Hypocalcemia",
                            "D) Hyperuricemia",
                            "E) Metabolic acidosis"
                        ],
                        answer: "B) Hyperglycemia"
                    }
                ]
            },
             {
                title: "GASTROINTESTINAL PHYSIOLOGY AND PHARMACOLOGY",
                questions: [
                     {
                        question: "Gastric acid secretion is primarily stimulated by:",
                        options: [
                            "A) Secretin",
                            "B) Gastrin",
                            "C) Cholecystokinin",
                            "D) Somatostatin",
                            "E) Motilin"
                        ],
                        answer: "B) Gastrin"
                    },
                    {
                        question: "Proton pump inhibitors reduce gastric acid secretion by:",
                        options: [
                            "A) Blocking histamine H2 receptors",
                            "B) Inhibiting gastrin release",
                            "C) Blocking muscarinic receptors",
                            "D) Inhibiting the H+/K+ ATPase",
                            "E) Neutralizing gastric acid"
                        ],
                        answer: "D) Inhibiting the H+/K+ ATPase"
                    },
                     {
                        question: "The migrating motor complex (MMC) in the gastrointestinal tract:",
                        options: [
                            "A) Occurs primarily during feeding",
                            "B) Moves content from the stomach to the small intestine",
                            "C) Is a series of contractions that occur during fasting",
                            "D) Is regulated primarily by gastrin",
                            "E) Is inhibited by motilin"
                        ],
                        answer: "C) Is a series of contractions that occur during fasting"
                    },
                     {
                        question: "Secretin primarily stimulates the secretion of:",
                        options: [
                            "A) Gastric acid",
                            "B) Pancreatic enzymes",
                            "C) Bicarbonate-rich pancreatic fluid",
                            "D) Bile",
                            "E) Intestinal enzymes"
                        ],
                        answer: "C) Bicarbonate-rich pancreatic fluid"
                    },
                    {
                        question: "The mechanism of action of loperamide in treating diarrhea is:",
                        options: [
                            "A) Inhibition of intestinal secretion",
                            "B) Stimulation of water absorption",
                            "C) Slowing of intestinal transit by activating opioid receptors",
                            "D) Killing of pathogenic bacteria",
                            "E) Neutralization of bacterial toxins"
                        ],
                        answer: "C) Slowing of intestinal transit by activating opioid receptors"
                    }
                ]
            },
             {
                title: "ENDOCRINE PHYSIOLOGY AND PHARMACOLOGY",
                questions: [
                    {
                        question: "The primary stimulus for insulin secretion is:",
                        options: [
                            "A) Increased blood glucose",
                            "B) Increased blood amino acids",
                            "C) Increased blood fatty acids",
                            "D) Sympathetic stimulation",
                            "E) Cortisol"
                        ],
                        answer: "A) Increased blood glucose"
                    },
                    {
                        question: "Insulin resistance is characterized by:",
                        options: [
                            "A) Decreased insulin production",
                            "B) Decreased insulin receptor expression",
                            "C) Normal insulin levels with impaired cellular response",
                            "D) Increased insulin clearance",
                            "E) Antibodies against insulin"
                        ],
                        answer: "C) Normal insulin levels with impaired cellular response"
                    },
                    {
                        question: "Which of the following hormones increases blood glucose levels?",
                        options: [
                            "A) Insulin",
                            "B) Glucagon",
                            "C) Incretins",
                            "D) Adiponectin",
                            "E) Amylin"
                        ],
                        answer: "B) Glucagon"
                    },
                    {
                        question: "The primary action of metformin in type 2 diabetes is:",
                        options: [
                            "A) Stimulating insulin secretion",
                            "B) Reducing hepatic glucose production",
                            "C) Inhibiting carbohydrate absorption",
                            "D) Increasing insulin clearance",
                            "E) Reducing glucagon secretion"
                        ],
                        answer: "B) Reducing hepatic glucose production"
                    },
                     {
                        question: "Sulfonylureas (e.g., glibenclamide) lower blood glucose primarily by:",
                        options: [
                            "A) Increasing insulin sensitivity",
                            "B) Reducing hepatic glucose production",
                            "C) Stimulating insulin secretion",
                            "D) Inhibiting carbohydrate absorption",
                            "E) Increasing glucose excretion"
                        ],
                        answer: "C) Stimulating insulin secretion"
                    }
                ]
            },
             {
                title: "CALCIUM AND BONE METABOLISM",
                questions: [
                    {
                        question: "Parathyroid hormone increases serum calcium by:",
                        options: [
                            "A) Increasing calcium absorption from the gut",
                            "B) Increasing bone formation",
                            "C) Decreasing renal calcium excretion and increasing bone resorption",
                            "D) Decreasing bone resorption",
                            "E) Increasing renal calcium excretion"
                        ],
                        answer: "C) Decreasing renal calcium excretion and increasing bone resorption"
                    },
                    {
                        question: "Vitamin D is converted to its active form 1,25-dihydroxycholecalciferol in the:",
                        options: [
                            "A) Skin",
                            "B) Liver",
                            "C) Kidney",
                            "D) Intestine",
                            "E) Parathyroid gland"
                        ],
                        answer: "C) Kidney"
                    },
                    {
                        question: "Calcitonin acts primarily by:",
                        options: [
                            "A) Increasing bone resorption",
                            "B) Decreasing bone resorption",
                            "C) Increasing calcium absorption from the gut",
                            "D) Decreasing renal calcium excretion",
                            "E) Increasing renal calcium excretion"
                        ],
                        answer: "B) Decreasing bone resorption"
                    },
                    {
                        question: "Bisphosphonates used in the treatment of osteoporosis work by:",
                        options: [
                            "A) Stimulating osteoblast activity",
                            "B) Inhibiting osteoclast activity",
                            "C) Increasing calcium absorption from the gut",
                            "D) Decreasing renal calcium excretion",
                            "E) Stimulating parathyroid hormone secretion"
                        ],
                        answer: "B) Inhibiting osteoclast activity"
                    },
                    {
                        question: "In osteomalacia, there is:",
                        options: [
                            "A) Increased bone mineral density",
                            "B) Normal bone mineral density with poor bone quality",
                            "C) Defective bone mineralization",
                            "D) Increased bone turnover",
                            "E) Decreased osteoid formation"
                        ],
                        answer: "C) Defective bone mineralization"
                    }
                ]
            },
            {
                title: "REPRODUCTIVE ENDOCRINOLOGY",
                questions: [
                    {
                        question: "Which hormone is responsible for the surge in luteinizing hormone (LH) that triggers ovulation?",
                        options: [
                            "A) Progesterone",
                            "B) Follicle stimulating hormone (FSH)",
                            "C) Estradiol",
                            "D) Inhibin",
                            "E) Human chorionic gonadotropin (hCG)"
                        ],
                        answer: "C) Estradiol"
                    },
                    {
                        question: "The corpus luteum secretes primarily:",
                        options: [
                            "A) Estrogen and inhibin",
                            "B) Progesterone and estrogen",
                            "C) FSH and LH",
                            "D) Testosterone and inhibin",
                            "E) hCG and progesterone"
                        ],
                        answer: "B) Progesterone and estrogen"
                    },
                     {
                        question: "Hormonal contraceptives containing estrogen and progestin work primarily by:",
                        options: [
                            "A) Preventing implantation",
                            "B) Inhibiting ovulation",
                            "C) Creating a hostile cervical mucus",
                            "D) Directly damaging sperm",
                            "E) Inducing early abortion"
                        ],
                        answer: "B) Inhibiting ovulation"
                    },
                     {
                        question: "During pregnancy, placental production of progesterone becomes significant by:",
                        options: [
                            "A) 4 weeks gestation",
                            "B) 8-10 weeks gestation",
                            "C) 20 weeks gestation",
                            "D) 30 weeks gestation",
                            "E) 36 weeks gestation"
                        ],
                        answer: "B) 8-10 weeks gestation"
                    },
                    {
                        question: "Initiation of parturition is associated with:",
                        options: [
                            "A) A rise in maternal estrogen and a fall in progesterone",
                            "B) A fall in maternal estrogen and a rise in progesterone",
                            "C) A fall in both maternal estrogen and progesterone",
                            "D) A rise in both maternal estrogen and progesterone",
                            "E) No change in either maternal estrogen or progesterone"
                        ],
                        answer: "A) A rise in maternal estrogen and a fall in progesterone"
                    }
                ]
            },
             {
                title: "HIGH ALTITUDE PHYSIOLOGY",
                questions: [
                    {
                        question: "The most immediate response to high altitude exposure is:",
                        options: [
                            "A) Increased erythropoiesis",
                            "B) Increased ventilation",
                            "C) Pulmonary vasoconstriction",
                            "D) Increased cardiac output",
                            "E) Increased 2,3-DPG in red blood cells"
                        ],
                        answer: "B) Increased ventilation"
                    },
                    {
                        question: "Chronic adaptation to high altitude includes:",
                        options: [
                            "A) Decreased hemoglobin concentration",
                            "B) Decreased 2,3-DPG in red blood cells",
                            "C) Increased pulmonary artery pressure",
                            "D) Decreased hematocrit",
                            "E) Decreased capillary density in muscles"
                        ],
                        answer: "C) Increased pulmonary artery pressure"
                    },
                     {
                        question: "High altitude pulmonary edema (HAPE) is primarily caused by:",
                        options: [
                            "A) Left ventricular failure",
                            "B) Excessive pulmonary vasoconstriction and increased capillary pressure",
                            "C) Increased pulmonary capillary permeability due to inflammation",
                            "D) Decreased oncotic pressure due to plasma protein loss",
                            "E) Renal sodium and water retention"
                        ],
                        answer: "B) Excessive pulmonary vasoconstriction and increased capillary pressure"
                    },
                     {
                        question: "Acetazolamide is used in the prevention of acute mountain sickness because it:",
                        options: [
                            "A) Dilates pulmonary blood vessels",
                            "B) Increases renal erythropoietin production",
                            "C) Induces respiratory alkalosis",
                            "D) Induces metabolic acidosis, stimulating ventilation",
                            "E) Reduces cerebral blood flow"
                        ],
                        answer: "D) Induces metabolic acidosis, stimulating ventilation"
                    },
                    {
                        question: "Which of the following is NOT a symptom of acute mountain sickness?",
                        options: [
                            "A) Headache",
                            "B) Nausea",
                            "C) Insomnia",
                            "D) Peripheral edema",
                            "E) Fatigue"
                        ],
                        answer: "D) Peripheral edema"
                    }
                ]
            },
            {
                title: "PHARMACOKINETICS AND PHARMACODYNAMICS",
                questions: [
                     {
                        question: "The volume of distribution (Vd) of a drug:",
                        options: [
                            "A) Is the physical volume in which the drug is contained in the body",
                            "B) Is the ratio of the amount of drug in the body to its plasma concentration",
                            "C) Is always equal to total body water",
                            "D) Determines how quickly the drug is eliminated",
                            "E) Is directly proportional to plasma protein binding"
                        ],
                        answer: "B) Is the ratio of the amount of drug in the body to its plasma concentration"
                    },
                    {
                        question: "A drug with high lipid solubility is likely to have:",
                        options: [
                            "A) Poor oral absorption",
                            "B) Low volume of distribution",
                            "C) Poor penetration of the blood-brain barrier",
                            "D) High renal clearance in unchanged form",
                            "E) Extensive tissue distribution"
                        ],
                        answer: "E) Extensive tissue distribution"
                    },
                     {
                        question: "First-order kinetics in drug elimination means that:",
                        options: [
                            "A) The rate of elimination is constant regardless of drug concentration",
                            "B) The rate of elimination is proportional to drug concentration",
                            "C) The drug is eliminated at a fixed percentage per unit time",
                            "D) The drug is eliminated only after all binding sites are saturated",
                            "E) The half-life increases as drug concentration decreases"
                        ],
                        answer: "B) The rate of elimination is proportional to drug concentration"
                    },
                     {
                        question: "The term \"bioavailability\" refers to:",
                        options: [
                            "A) The fraction of administered drug that reaches systemic circulation unchanged",
                            "B) The concentration of drug at its site of action",
                            "C) The volume of plasma cleared of drug per unit time",
                            "D) The time taken for plasma concentration to fall by 50%",
                            "E) The therapeutic window between effective and toxic doses"
                        ],
                        answer: "A) The fraction of administered drug that reaches systemic circulation unchanged"
                    },
                    {
                        question: "Drug clearance is best defined as:",
                        options: [
                            "A) The volume of plasma completely cleared of drug per unit time",
                            "B) The rate of drug elimination from the body",
                            "C) The time required for drug concentration to decrease by 50%",
                            "D) The rate of drug metabolism in the liver",
                            "E) The amount of drug excreted in urine per unit time"
                        ],
                        answer: "A) The volume of plasma completely cleared of drug per unit time"
                    }
                ]
            },
            {
                title: "AUTONOMIC NERVOUS SYSTEM",
                questions: [
                     {
                        question: "Stimulation of the sympathetic nervous system causes:",
                        options: [
                            "A) Bradycardia",
                            "B) Increased gastrointestinal motility",
                            "C) Pupillary constriction",
                            "D) Bronchodilation",
                            "E) Decreased sweating"
                        ],
                        answer: "D) Bronchodilation"
                    },
                    {
                        question: "The primary neurotransmitter at sympathetic postganglionic terminals is:",
                        options: [
                            "A) Acetylcholine",
                            "B) Norepinephrine",
                            "C) Epinephrine",
                            "D) Dopamine",
                            "E) Serotonin"
                        ],
                        answer: "B) Norepinephrine"
                    },
                    {
                        question: "Stimulation of muscarinic receptors causes:",
                        options: [
                            "A) Tachycardia",
                            "B) Bronchodilation",
                            "C) Urinary retention",
                            "D) Increased gastric acid secretion",
                            "E) Mydriasis (pupillary dilation)"
                        ],
                        answer: "D) Increased gastric acid secretion"
                    },
                    {
                        question: "Beta-1 adrenergic receptors are predominantly found in:",
                        options: [
                            "A) Bronchial smooth muscle",
                            "B) Heart",
                            "C) Blood vessels",
                            "D) Gastrointestinal tract",
                            "E) Bladder"
                        ],
                        answer: "B) Heart"
                    },
                    {
                        question: "An anticholinergic drug would be expected to cause:",
                        options: [
                            "A) Bronchoconstriction",
                            "B) Increased salivation",
                            "C) Diarrhea",
                            "D) Urinary retention",
                            "E) Miosis (pupillary constriction)"
                        ],
                        answer: "D) Urinary retention"
                    }
                ]
            },
             {
                title: "NEUROPHARMACOLOGY",
                questions: [
                    {
                        question: "The mechanism of action of benzodiazepines is:",
                        options: [
                            "A) Antagonism of glutamate receptors",
                            "B) Potentiation of GABA action at GABAA receptors",
                            "C) Inhibition of monoamine oxidase",
                            "D) Inhibition of serotonin reuptake",
                            "E) Blockade of dopamine receptors"
                        ],
                        answer: "B) Potentiation of GABA action at GABAA receptors"
                    },
                     {
                        question: "Selective serotonin reuptake inhibitors (SSRIs) are used to treat:",
                        options: [
                            "A) Parkinson's disease",
                            "B) Epilepsy",
                            "C) Depression",
                            "D) Schizophrenia",
                            "E) Multiple sclerosis"
                        ],
                        answer: "C) Depression"
                    },
                     {
                        question: "The primary mechanism of action of levodopa in Parkinson's disease is:",
                        options: [
                            "A) Direct stimulation of dopamine receptors",
                            "B) Inhibition of dopamine reuptake",
                            "C) Serving as a precursor for dopamine synthesis",
                            "D) Blockade of acetylcholine receptors",
                            "E) Inhibition of monoamine oxidase"
                        ],
                        answer: "C) Serving as a precursor for dopamine synthesis"
                    },
                     {
                        question: "Opioid analgesics produce their effects primarily by:",
                        options: [
                            "A) Inhibiting prostaglandin synthesis",
                            "B) Blocking sodium channels",
                            "C) Activating opioid receptors",
                            "D) Inhibiting substance P release",
                            "E) Activating NMDA receptors"
                        ],
                        answer: "C) Activating opioid receptors"
                    },
                    {
                        question: "Local anesthetics work primarily by:",
                        options: [
                            "A) Blocking voltage-gated sodium channels",
                            "B) Enhancing GABA action",
                            "C) Blocking calcium channels",
                            "D) Inhibiting acetylcholinesterase",
                            "E) Activating potassium channels"
                        ],
                        answer: "A) Blocking voltage-gated sodium channels"
                    }
                ]
            }
        ]; // End of quizData
        // End of quizData

                // Initialize state variables
        let currentSection = 0;
        let currentQuestion = 0;
        // selectedOption will now store the index of the option selected for the *currently displayed* question
        // The persistent storage of answers will be in allResults
        let selectedOptionIndexForCurrentQuestion = null;
        // allResults will store the index of the selected option for *each* question in *each* section.
        // It will be a 2D array: allResults[sectionIndex][questionIndex] = selectedOptionIndex (or null if not answered)
        let allResults = [];

        // DOM elements (Ensure these are defined before the script if they are outside)
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container'); // Section results
        const overallCompletionContainer = document.getElementById('overall-completion-message'); // Overall results
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const backButton = document.getElementById('back-button');
        const currentSectionElement = document.getElementById('current-section');
        const currentQuestionElement = document.getElementById('current-question');
        const totalQuestionsElement = document.getElementById('total-questions');
        const nextSectionButton = document.getElementById('next-section-button');
        const resultsListElement = document.getElementById('results-list'); // Section results list
        const correctCountElement = document.getElementById('correct-count'); // Section correct count
        const questionCountElement = document.getElementById('question-count'); // Section total questions
        const percentageElement = document.getElementById('percentage'); // Section percentage

        // New DOM elements for overall progress, contents, and reset
        const overallProgressText = document.getElementById('overall-progress-text');
        const overallProgressFill = document.getElementById('overall-progress-fill');
        const contentsListElement = document.getElementById('contents-list');
        const resetQuizButton = document.getElementById('reset-quiz-button');
        const overallStatsContainer = document.getElementById('overall-stats-container'); // Container for overall stats details
        const overallRestartButton = document.getElementById('overall-restart-button'); // Restart button on overall completion view


        // --- Helper functions for updating UI elements ---

        // Update the overall progress bar and text
        function updateOverallProgress() {
            let totalQuestions = 0;
            let answeredQuestions = 0;

            quizData.forEach((section, sectionIndex) => {
                 if (section && section.questions) { // Defensive check
                    totalQuestions += section.questions.length;
                    if (allResults[sectionIndex]) { // Check if section exists in results
                        answeredQuestions += allResults[sectionIndex].filter(answerIndex => answerIndex !== null).length;
                    }
                 }
            });

            const percentage = totalQuestions > 0 ? Math.round((answeredQuestions / totalQuestions) * 100) : 0;

            overallProgressText.textContent = `Overall Progress: ${percentage}% (${answeredQuestions} / ${totalQuestions})`;
            overallProgressFill.style.width = `${percentage}%`;
        }

        // Render or update the contents list at the bottom
        function renderContentsList() {
            contentsListElement.innerHTML = ''; // Clear existing list

            quizData.forEach((section, sectionIndex) => {
                 // Check if section and questions exist
                 if (!section || !section.questions || section.questions.length === 0) {
                     return; // Skip sections with no questions
                 }

                const sectionData = section.questions;
                const sectionTotal = sectionData.length;
                let sectionAnswered = 0;
                let sectionCorrect = 0;
                let sectionCompleted = false;

                if (allResults[sectionIndex]) {
                    const savedAnswers = allResults[sectionIndex];
                    sectionAnswered = savedAnswers.filter(answerIndex => answerIndex !== null).length;
                    sectionCompleted = (sectionAnswered === sectionTotal && sectionTotal > 0); // Section completed only if it has questions

                    savedAnswers.forEach((savedIndex, questionIndex) => {
                        // Ensure the index is valid within the section data length and options exist
                        if (savedIndex !== null && questionIndex < sectionData.length && sectionData[questionIndex].options) {
                            const question = sectionData[questionIndex];
                            // Safely access options array
                            const userAnswerText = (savedIndex >= 0 && savedIndex < question.options.length) ? question.options[savedIndex] : null;
                            if (userAnswerText !== null && userAnswerText === question.answer) {
                                sectionCorrect++;
                            }
                        }
                    });
                }

                const listItem = document.createElement('li');
                 // Use class for styling instead of inline styles if desired
                // listItem.className = 'contents-list-item';
                listItem.style.cssText = 'margin-bottom: 8px; padding: 12px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px; cursor: pointer; transition: background-color 0.2s;';
                 // Update score display even if section isn't fully answered
                listItem.innerHTML = `<strong>${section.title}</strong> <span style="float: right;">${sectionCorrect}/${sectionTotal}</span>`;


                // Add click handler
                listItem.addEventListener('click', () => handleContentsClick(sectionIndex));

                contentsListElement.appendChild(listItem);
            });
        }

        // Handle click on a section in the contents list
        function handleContentsClick(sectionIndex) {
             // Validate section index
             if (sectionIndex < 0 || sectionIndex >= quizData.length || !quizData[sectionIndex].questions || quizData[sectionIndex].questions.length === 0) {
                 console.error("Invalid section index clicked in contents list:", sectionIndex);
                 return; // Do nothing if index is invalid or section has no questions
             }

            currentSection = sectionIndex;
            const sectionData = quizData[sectionIndex].questions;
             // Check completion based on saved results, default to empty array if no results saved for section
            const sectionAnsweredCount = allResults[sectionIndex] ? allResults[sectionIndex].filter(ans => ans !== null).length : 0;
            const sectionCompleted = (sectionAnsweredCount === sectionData.length && sectionData.length > 0);


            if (sectionCompleted) {
                // Go to the results page for this section
                // Set currentQuestion to the end of the section to signify completion state
                currentQuestion = sectionData.length;
                showResults(); // This function will now display results for currentSection
            } else {
                // Go to the first unanswered question in this section
                // Use findIndex on the saved answers array for this section
                const savedAnswers = allResults[sectionIndex] || []; // Get saved answers or empty array
                const firstUnansweredIndex = savedAnswers.findIndex(ans => ans === null);

                currentQuestion = firstUnansweredIndex >= 0 ? firstUnansweredIndex : 0; // Default to 0 if findIndex returns -1 (shouldn't happen if not completed, but safe)

                displayQuestion(); // This function will now display the question at currentSection, currentQuestion
            }
        }

        // --- Core Quiz Logic Functions (Modified) ---

        // Initialize quiz
        function initQuiz() {
             // Explicitly set default start point before loading saved data.
             // loadResults will then potentially overwrite these if a resume point is found.
             currentSection = 0;
             currentQuestion = 0;
             selectedOptionIndexForCurrentQuestion = null;

            // Load saved results - this might overwrite currentSection/currentQuestion
            loadResults();

            // Check if quizData is empty or has no questions
             const totalPossibleQuestions = quizData.reduce((sum, section) => sum + (section.questions ? section.questions.length : 0), 0);

             if (!quizData || quizData.length === 0 || totalPossibleQuestions === 0) {
                 console.warn("Quiz data is empty or contains no questions. Cannot start quiz.");
                 quizContainer.innerHTML = "<h2>No Quiz Data Available.</h2><p>Please provide quiz questions to start.</p>";
                 // Hide other elements if no data
                 document.querySelector('.progress-bar-container').style.display = 'none';
                 document.getElementById('contents-list-container').style.display = 'none';
                 resetQuizButton.style.display = 'none';
                 return; // Stop initialization
            }


            // Ensure UI is in the correct state based on loaded data
            updateOverallProgress();
            renderContentsList(); // Initial render of contents


            // Check if the quiz is fully completed on load
            let answeredQuestionsCount = 0;
             allResults.forEach((sectionAnswers, sectionIndex) => {
                  if (sectionAnswers) { // Ensure sectionAnswers array exists
                      answeredQuestionsCount += sectionAnswers.filter(answerIndex => answerIndex !== null).length;
                  }
             });


            if (answeredQuestionsCount === totalPossibleQuestions) {
                 // If all questions are answered, and there are questions, show overall results immediately
                 // Need to set currentSection/Question state appropriately for overall results view
                 currentSection = quizData.length > 0 ? quizData.length - 1 : 0; // Set to last section (or 0 if no sections)
                 currentQuestion = (currentSection >= 0 && quizData[currentSection] && quizData[currentSection].questions) ? quizData[currentSection].questions.length : 0; // Set past last question (or 0)
                 showOverallResults();
            } else {
                // Otherwise, start/resume the quiz at the point determined by loadResults
                // displayQuestion will use currentSection and currentQuestion as set by loadResults (or the default 0,0)
                displayQuestion();
            }


            // Event listeners
            nextButton.addEventListener('click', handleNextQuestion);
            backButton.addEventListener('click', handleBackQuestion);
            nextSectionButton.addEventListener('click', handleNextSection);
            resetQuizButton.addEventListener('click', handleResetQuiz); // Add reset button listener
            overallRestartButton.addEventListener('click', handleResetQuiz); // Restart button on overall view
        }

        // Load results from local storage
        function loadResults() {
            const savedResults = localStorage.getItem('appAiQuizResults');
            let loadedResults = []; // Temporary array to hold loaded data

            if (savedResults) {
                try {
                    loadedResults = JSON.parse(savedResults);
                    if (!Array.isArray(loadedResults)) { // Handle old/corrupt data
                         loadedResults = [];
                    }
                } catch (e) {
                     console.error("Failed to parse saved results:", e);
                     loadedResults = []; // Treat as no saved data on error
                }
            }

            // Initialize allResults structure based on current quizData, filling from loadedResults
             allResults = quizData.map((section, sectionIndex) => {
                 const sectionQuestionCount = section.questions ? section.questions.length : 0;
                 const sectionLoadedAnswers = (loadedResults[sectionIndex] && Array.isArray(loadedResults[sectionIndex])) ? loadedResults[sectionIndex] : [];

                 // Create the section array, copying loaded answers and filling remaining with null
                 const sectionResultsArray = Array(sectionQuestionCount).fill(null);
                 for (let j = 0; j < sectionQuestionCount; j++) {
                     if (j < sectionLoadedAnswers.length && sectionLoadedAnswers[j] !== undefined) {
                         // Copy the saved answer if it exists and is not undefined
                         sectionResultsArray[j] = sectionLoadedAnswers[j];
                     }
                 }
                 return sectionResultsArray;
             });


            // Find where to resume: find the first question in the first section that hasn't been answered (is null)
            let foundResumePoint = false;
            for (let i = 0; i < allResults.length; i++) {
                 // Check if the section from quizData exists and has questions before looking for null
                 if (quizData[i] && quizData[i].questions && quizData[i].questions.length > 0) {
                    for (let j = 0; j < allResults[i].length; j++) {
                        if (allResults[i][j] === null) {
                            currentSection = i;
                            currentQuestion = j;
                            foundResumePoint = true;
                            break; // Found the question to resume at
                        }
                    }
                 }
                if (foundResumePoint) break; // Found resume point in an earlier section
            }

            // If loop finished without finding a null, all questions with data in quizData are answered.
            // Check total questions vs answered questions to confirm full completion.
            let totalQ = quizData.reduce((sum, section) => sum + (section.questions ? section.questions.length : 0), 0);
            let answeredQ = allResults.reduce((sum, sectionAns) => sum + (sectionAns ? sectionAns.filter(ans => ans !== null).length : 0), 0);

            if (!foundResumePoint && totalQ > 0 && answeredQ === totalQ) {
                 // All answered, set indices to the end state to trigger overall results view in initQuiz
                 currentSection = quizData.length > 0 ? quizData.length - 1 : 0; // Last section index
                 currentQuestion = (currentSection >= 0 && quizData[currentSection] && quizData[currentSection].questions) ? quizData[currentSection].questions.length : 0; // One past the last question index
            } else if (!foundResumePoint && totalQ > 0 && answeredQ < totalQ) {
                 // This case should ideally not happen if findIndex worked correctly on valid data.
                 // If no resume point found, but questions are incomplete, default to the very start (0,0).
                 // This acts as a safety fallback for unexpected data states.
                 console.warn("Resume point not found, but quiz is incomplete. Falling back to Section 1, Question 1 (index 0, 0).");
                 currentSection = 0;
                 currentQuestion = 0;
            } else if (totalQ === 0) {
                 // If quizData is empty, set to 0,0. initQuiz will show no data message.
                 currentSection = 0;
                 currentQuestion = 0;
            }
             // If foundResumePoint was true, currentSection/currentQuestion were already set correctly in the loop.

             // Debugging
             console.log("Loaded Results:", allResults);
             console.log("Resume point (loadResults final):", currentSection, currentQuestion);
        }

        // Save results to local storage
        function saveResults() {
            localStorage.setItem('appAiQuizResults', JSON.stringify(allResults));
            // Update UI elements that depend on saved results
            updateOverallProgress();
            renderContentsList(); // Update contents list scores
        }


        // Display current question
        function displayQuestion() {
            // Hide results views
            resultsContainer.style.display = 'none';
            overallCompletionContainer.style.display = 'none';

             // Check for empty quiz data early
             const totalPossibleQuestions = quizData.reduce((sum, section) => sum + (section.questions ? section.questions.length : 0), 0);
             if (!quizData || quizData.length === 0 || totalPossibleQuestions === 0) {
                 quizContainer.style.display = 'block'; // Still need container to show message
                 quizContainer.innerHTML = "<h2>No Quiz Data Available.</h2><p>Please provide quiz questions to start.</p>";
                 // Hide other elements if no data
                 document.querySelector('.progress-bar-container').style.display = 'none';
                 document.getElementById('contents-list-container').style.display = 'none';
                 resetQuizButton.style.display = 'none';
                 return; // Exit function
             }

             // Ensure currentSection is valid before accessing quizData
             if (currentSection >= quizData.length || currentSection < 0 || !quizData[currentSection] || !quizData[currentSection].questions) {
                 console.error("Invalid section index for display:", currentSection, ". Redirecting.");
                 handleNextSection(); // Try to move to the next valid section or overall results
                 return;
             }

            const currentSectionData = quizData[currentSection];

            // Check if the section actually has questions
             if (currentSectionData.questions.length === 0) {
                 console.warn(`Section ${currentSection} has no questions. Skipping to next section.`);
                 handleNextSection(); // Automatically move to the next section
                 return;
             }

            // Ensure currentQuestion is valid within the current section's questions
             if (currentQuestion >= currentSectionData.questions.length || currentQuestion < 0) {
                 console.error("Invalid question index:", currentQuestion, "in section", currentSection, ". Redirecting.");
                 // If past the last question index, it means the section is completed, show results for this section
                 if (currentQuestion >= currentSectionData.questions.length) {
                     showResults();
                 } else { // Should not be less than 0 unless logic error, reset to start
                     currentSection = 0; currentQuestion = 0; displayQuestion(); // Attempt restart at 0,0
                 }
                 return;
             }


            const questionData = currentSectionData.questions[currentQuestion];

            quizContainer.style.display = 'block'; // Ensure quiz view is visible

            // Update progress information
            currentSectionElement.textContent = quizData[currentSection].title; // Use title from quizData
            currentQuestionElement.textContent = currentQuestion + 1;
            totalQuestionsElement.textContent = currentSectionData.questions.length;

            // Display question
            questionText.textContent = questionData.question;

            // Clear and populate options
            optionsContainer.innerHTML = '';
            // Get the saved answer index for this specific question
            // Ensure allResults[currentSection] exists and is an array before accessing index
            selectedOptionIndexForCurrentQuestion = (allResults[currentSection] && Array.isArray(allResults[currentSection]) && allResults[currentSection][currentQuestion] !== undefined) ? allResults[currentSection][currentQuestion] : null;


             // Ensure questionData.options exists and is an array
             if (questionData.options && Array.isArray(questionData.options)) {
                 questionData.options.forEach((option, index) => {
                     const optionElement = document.createElement('div');
                     optionElement.className = 'option';
                     optionElement.textContent = option;
                     // Add click listener to select this option
                     optionElement.addEventListener('click', () => selectOption(index));

                     // If this option index matches the saved answer, mark it as selected
                     if (selectedOptionIndexForCurrentQuestion !== null && index === selectedOptionIndexForCurrentQuestion) {
                         optionElement.classList.add('selected');
                     }
                     optionsContainer.appendChild(optionElement);
                 });
             } else {
                 optionsContainer.innerHTML = '<em>No options available for this question.</em>';
                 console.warn(`Question ${currentQuestion + 1} in section ${currentSection + 1} has no options array.`);
             }


            // Enable next button if an option is already selected (from saved state)
            nextButton.disabled = (selectedOptionIndexForCurrentQuestion === null);

            // Manage back button state
            backButton.disabled = (currentSection === 0 && currentQuestion === 0);

        }

        // Handle option selection
        function selectOption(index) {
            // Validate index against options length and question/section existence
             const currentSectionData = quizData[currentSection];
             if (!currentSectionData || !currentSectionData.questions || currentQuestion >= currentSectionData.questions.length) return;
             const questionData = currentSectionData.questions[currentQuestion];
             if (!questionData.options || !Array.isArray(questionData.options) || index < 0 || index >= questionData.options.length) {
                 console.error("Invalid option index selected or options missing:", index);
                 return;
             }

            selectedOptionIndexForCurrentQuestion = index;

            // Update UI to show selected option
            const options = optionsContainer.querySelectorAll('.option');
            options.forEach((option, i) => {
                if (i === index) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });

            // Enable next button
            nextButton.disabled = false;

            // Save the selected option index immediately
            // Ensure the results structure is prepared for this section and question
            // This should be handled by loadResults/initQuiz, but defensive check
            if (!allResults[currentSection]) {
                 // This indicates a severe state mismatch if loadResults/initQuiz didn't prepare this
                 console.error("allResults structure invalid at section", currentSection, ". Re-initializing results.");
                 allResults = quizData.map(section => Array(section.questions ? section.questions.length : 0).fill(null));
            }
             // Ensure the array is large enough for this question index
             const sectionQuestionCount = quizData[currentSection].questions ? quizData[currentSection].questions.length : 0;
             while(allResults[currentSection].length < sectionQuestionCount) {
                 allResults[currentSection].push(null);
             }

            if (currentQuestion < allResults[currentSection].length) {
                allResults[currentSection][currentQuestion] = selectedOptionIndexForCurrentQuestion;
                saveResults();
            } else {
                console.error("Attempted to save answer for invalid question index in results array:", currentQuestion);
                 // Optionally trigger a state reset or warning
            }
        }

        // Handle next question
        function handleNextQuestion() {
            // The answer should already be saved in selectOption if an option was picked
            // If next is enabled, an option must have been picked.

            const currentSectionData = quizData[currentSection];
             if (!currentSectionData || !currentSectionData.questions) {
                 console.error("Invalid section data for next question navigation.");
                 handleNextSection(); // Attempt to move on gracefully
                 return;
             }

            // Move to next question or show results
            if (currentQuestion < currentSectionData.questions.length - 1) {
                currentQuestion++;
                displayQuestion();
            } else {
                // Reached end of section, show results for this section
                 // Increment currentQuestion to signify we are *past* the last question
                currentQuestion++;
                showResults();
            }
        }

        // Handle back button
        function handleBackQuestion() {
            // Cannot go back from the first question (button is disabled)
            if (currentSection === 0 && currentQuestion === 0) {
                return;
            }

             // If currently on a results page, go back to the last question of the section results were shown for
             if (resultsContainer.style.display === 'block') {
                  // If we just showed results for currentSection, go back to the last question of currentSection
                 if (currentSection >= 0 && quizData[currentSection] && quizData[currentSection].questions) {
                      currentQuestion = quizData[currentSection].questions.length - 1; // Go back to the last question index
                 } else {
                      // Fallback if current section data is missing (shouldn't happen if showResults validated)
                     currentSection = 0;
                     currentQuestion = 0;
                 }
                 displayQuestion(); // Display the question

             } else if (overallCompletionContainer.style.display === 'block') {
                 // If currently viewing overall results, go back to the results of the last section
                 currentSection = quizData.length > 0 ? quizData.length - 1 : 0; // Move to the last section index
                  // Ensure the last section has questions before attempting to show its results
                 if (currentSection >= 0 && quizData[currentSection] && quizData[currentSection].questions && quizData[currentSection].questions.length > 0) {
                      // Set currentQuestion past the last question index to trigger showResults
                      currentQuestion = quizData[currentSection].questions.length;
                      showResults();
                 } else {
                      // If last section is empty or quizData is empty, just go to the start of the quiz view
                      currentSection = 0;
                      currentQuestion = 0;
                      displayQuestion();
                 }

             } else if (currentQuestion > 0) {
                // Move back within the current section (if not on a results page)
                currentQuestion--;
                displayQuestion();
            } else if (currentSection > 0) {
                // Move back to the last question of the previous section (if not on a results page)
                currentSection--;
                 // Find the last question index in the previous section
                 if (currentSection >= 0 && quizData[currentSection] && quizData[currentSection].questions) {
                     currentQuestion = quizData[currentSection].questions.length - 1;
                 } else {
                      // Fallback if previous section data is missing
                      currentSection = 0; // Go to start if previous is invalid
                      currentQuestion = 0;
                 }
                 displayQuestion();
            }
            // If currentSection is 0 and currentQuestion is 0, button is disabled, so we don't reach here.
        }

        // Show section results
        function showResults() {
            quizContainer.style.display = 'none';
            overallCompletionContainer.style.display = 'none';
            resultsContainer.style.display = 'block'; // Show section results view

            // Ensure currentSection is valid for displaying results
             if (currentSection >= quizData.length || currentSection < 0 || !quizData[currentSection] || !quizData[currentSection].questions) {
                 console.error("Invalid section index or data for results:", currentSection, ". Redirecting to overall results.");
                 showOverallResults(); // Fallback to overall results
                 return;
             }

            const currentSectionData = quizData[currentSection];
             const currentSectionQuestions = currentSectionData.questions;

             // If the section has no questions, just move to the next section
             if (!currentSectionQuestions || currentSectionQuestions.length === 0) {
                 console.warn(`Attempted to show results for empty section ${currentSection}. Moving to next section.`);
                 handleNextSection();
                 return;
             }


            const sectionAnsweredIndices = allResults[currentSection] || []; // Use empty array if section results are missing

            // Calculate stats for the current section
            let correct = 0;
            let total = currentSectionQuestions.length; // Total questions in this section

            sectionAnsweredIndices.forEach((savedIndex, index) => {
                // Ensure the index is valid and an answer was saved, and question/options exist
                if (savedIndex !== null && index < currentSectionQuestions.length && currentSectionQuestions[index].options) {
                    const questionData = currentSectionQuestions[index];
                     // Safely access options array
                     const userAnswerText = (savedIndex >= 0 && savedIndex < questionData.options.length) ? questionData.options[savedIndex] : null;
                    if (userAnswerText !== null && userAnswerText === questionData.answer) {
                        correct++;
                    }
                }
            });

            const percentage = total > 0 ? Math.round((correct / total) * 100) : 0;

            // Update stats display
            correctCountElement.textContent = correct;
            questionCountElement.textContent = total;
            percentageElement.textContent = percentage;

            // Display detailed results for the section
            resultsListElement.innerHTML = '';

            currentSectionQuestions.forEach((questionData, questionIndex) => {
                const savedAnswerIndex = allResults[currentSection] && allResults[currentSection][questionIndex] !== undefined ? allResults[currentSection][questionIndex] : null; // Get user's saved index for this question
                 // Handle potential missing options array defensively
                const userAnswerText = (savedAnswerIndex !== null && questionData.options && Array.isArray(questionData.options) && savedAnswerIndex >= 0 && savedAnswerIndex < questionData.options.length) ? questionData.options[savedAnswerIndex] : 'Not answered';
                const correctAnswerText = questionData.answer; // Assume correct answer is always a string if question exists

                const isCorrect = (savedAnswerIndex !== null) && (userAnswerText === correctAnswerText);

                const resultItem = document.createElement('div');
                // Determine the main class for the result item container
                 if (savedAnswerIndex === null) {
                     resultItem.className = 'result-item unanswered'; // Use unanswered class
                 } else {
                     resultItem.className = `result-item ${isCorrect ? 'correct' : 'incorrect'}`;
                 }


                let optionsHtml = '<div class="options" style="gap: 8px; margin-top: 10px;">'; // Container for options in results

                 // Display all options regardless
                 if (questionData.options && Array.isArray(questionData.options)) { // Ensure options array exists
                     questionData.options.forEach((optionText, optionIndex) => {
                         let optionClass = 'option'; // Base class for styling for results display

                         // Apply specific classes for visual feedback in results
                         const isCorrectOption = (optionText === correctAnswerText);
                         const isUserAnswer = (savedAnswerIndex !== null && optionIndex === savedAnswerIndex);

                         if (isCorrectOption && isUserAnswer) {
                              optionClass = 'option correct selected'; // Correct and user selected this one
                         } else if (isCorrectOption) {
                              optionClass = 'option correct'; // Correct, but user didn't select this one
                         } else if (isUserAnswer) {
                              optionClass = 'option incorrect selected'; // Incorrect, and user selected this one
                         } else {
                              optionClass = 'option'; // Not correct, user didn't select this one
                         }


                         optionsHtml += `<div class="${optionClass}" style="cursor: default; padding: 8px 12px;">${optionText}</div>`;
                     });
                 } else {
                     optionsHtml += '<em>No options provided for this question.</em>';
                     console.warn(`Question ${questionIndex + 1} in section ${currentSection + 1} is missing options array.`);
                 }

                optionsHtml += '</div>';

                // Display question and results summary for this question
                resultItem.innerHTML = `
                    <p><strong>Question ${questionIndex + 1}:</strong> ${questionData.question}</p>
                    ${optionsHtml}
                    <p style="margin-top: 10px;"><strong>Your answer:</strong> ${userAnswerText} ${!isCorrect && savedAnswerIndex !== null ? ' (Incorrect)' : ''}</p>
                    ${savedAnswerIndex === null || !isCorrect ? `<p><strong>Correct answer:</strong> ${correctAnswerText} ${savedAnswerIndex === null ? '(Not Answered)' : ''}</p>` : ''}
                `;
                // The status is already conveyed by the container class and options styling


                resultsListElement.appendChild(resultItem);
            });

            // Determine if the next section button should be "Next Section" or "Finish Quiz"
            // Find the next section that actually has questions
             let nextSectionIndex = currentSection + 1;
             while(nextSectionIndex < quizData.length && (!quizData[nextSectionIndex].questions || quizData[nextSectionIndex].questions.length === 0)) {
                 nextSectionIndex++;
             }

            if (nextSectionIndex < quizData.length) {
                nextSectionButton.textContent = 'Next Section';
                 nextSectionButton.disabled = false; // Always allow moving to next section from results
            } else {
                nextSectionButton.textContent = 'Finish Quiz';
                 nextSectionButton.disabled = false; // Always allow finishing from the last section's results
            }
        }

        // Handle next section or finish quiz
        function handleNextSection() {
             // Find the next section that has questions
             let nextSectionIndex = currentSection + 1;
             while(nextSectionIndex < quizData.length && (!quizData[nextSectionIndex] || !quizData[nextSectionIndex].questions || quizData[nextSectionIndex].questions.length === 0)) {
                 nextSectionIndex++;
             }

            // Check if we are currently viewing the results of the last section WITH questions
            if (nextSectionIndex >= quizData.length) {
                 // If so, show overall results (no more sections with questions)
                showOverallResults();
            } else {
                // Move to the next section that has questions
                currentSection = nextSectionIndex;
                currentQuestion = 0;
                selectedOptionIndexForCurrentQuestion = null; // Reset state for the *new* question
                // displayQuestion will load the saved state for the first question of the new section
                displayQuestion();
            }
        }

        // Show overall results at the very end
        function showOverallResults() {
             quizContainer.style.display = 'none';
             resultsContainer.style.display = 'none'; // Hide section results
             overallCompletionContainer.style.display = 'block'; // Show overall completion view

             overallStatsContainer.innerHTML = generateOverallStats(); // Populate the stats within the container
        }


        // Generate overall statistics HTML
        function generateOverallStats() {
            let totalQuestions = 0;
            let totalCorrect = 0;

            quizData.forEach((section, sectionIndex) => {
                if (section && section.questions) { // Defensive check
                    totalQuestions += section.questions.length;
                    if (allResults[sectionIndex]) {
                        allResults[sectionIndex].forEach((savedIndex, questionIndex) => {
                             // Ensure valid index and question/options exist
                             if (savedIndex !== null && questionIndex < section.questions.length && section.questions[questionIndex].options) {
                                 const questionData = section.questions[questionIndex];
                                  // Safely access options array
                                 const userAnswerText = (savedIndex >= 0 && savedIndex < questionData.options.length) ? questionData.options[savedIndex] : null;
                                 if (userAnswerText !== null && userAnswerText === questionData.answer) {
                                     totalCorrect++;
                                 }
                             }
                         });
                    }
                }
            });

            const percentage = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;

            let html = `<p>You scored <span id="overall-correct-count">${totalCorrect}</span> out of <span id="overall-question-count">${totalQuestions}</span> (<span id="overall-percentage">${percentage}%</span>)</p>`;

            html += '<h3 style="text-align: center; margin-top: 20px; margin-bottom: 10px;">Section Breakdown:</h3>';
            html += '<ul style="text-align: left; max-width: 400px; margin: 0 auto; list-style: none; padding: 0;">'; // Added styling for list

            quizData.forEach((section, index) => {
                 if (section && section.questions && section.questions.length > 0) { // Only show sections that actually have questions
                    const sectionResults = allResults[index];
                    let sectionCorrect = 0;
                    let sectionAnsweredCount = 0; // Count questions the user actually answered
                    if(sectionResults) {
                         sectionResults.forEach((savedIndex, questionIndex) => {
                             // Ensure valid index and question/options exist
                             if (savedIndex !== null && questionIndex < section.questions.length && section.questions[questionIndex].options) {
                                 sectionAnsweredCount++;
                                 const questionData = section.questions[questionIndex];
                                  // Safely access options array
                                 const userAnswerText = (savedIndex >= 0 && savedIndex < questionData.options.length) ? questionData.options[savedIndex] : null;
                                 if (userAnswerText !== null && userAnswerText === questionData.answer) {
                                     sectionCorrect++;
                                 }
                             }
                         });
                    }


                    const sectionTotal = section.questions.length;
                    // Calculate percentage based on total questions in section
                    const sectionPercentage = sectionTotal > 0 ? Math.round((sectionCorrect / sectionTotal) * 100) : 0;

                     // Indicate if the section is completed (all questions answered)
                    const completionStatus = (sectionAnsweredCount === sectionTotal && sectionTotal > 0) ? ' (Completed)' : '';


                    html += `<li style="margin-bottom: 5px; padding: 8px; background-color: #e9ecef; border-radius: 4px;"><strong>${section.title}:</strong> ${sectionCorrect}/${sectionTotal} (${sectionPercentage}%)${completionStatus}</li>`; // Added styling for list items
                }
            });
            html += '</ul>';

            return html;
        }

        // Handle Reset Quiz Button
        function handleResetQuiz() {
            const confirmation = confirm("Are you sure you want to reset all your quiz data? This action cannot be undone.");
            if (confirmation) {
                // Clear local storage
                localStorage.removeItem('appAiQuizResults');
                console.log("Quiz data reset in local storage.");

                // Reset state variables
                currentSection = 0;
                currentQuestion = 0;
                selectedOptionIndexForCurrentQuestion = null;
                // Re-initialize allResults structure based on quizData, filled with nulls
                allResults = quizData.map(section => Array(section.questions ? section.questions.length : 0).fill(null));
                 console.log("Internal state reset:", allResults);


                // Update UI (progress and contents)
                updateOverallProgress();
                renderContentsList();

                // Go back to the start of the quiz (Section 1, Question 1)
                resultsContainer.style.display = 'none'; // Hide section results
                overallCompletionContainer.style.display = 'none'; // Hide overall results

                 // Ensure there are questions to display before calling displayQuestion
                 const totalPossibleQuestions = quizData.reduce((sum, section) => sum + (section.questions ? section.questions.length : 0), 0);
                 if (totalPossibleQuestions > 0) {
                     quizContainer.style.display = 'block'; // Show quiz view
                    displayQuestion(); // This will display the first question (0,0)
                 } else {
                      // If quizData is empty after reset, show message
                     quizContainer.style.display = 'block'; // Ensure container is visible for message
                     quizContainer.innerHTML = "<h2>Quiz data reset. No quiz data available.</h2><p>Please provide quiz questions.</p>";
                     // Hide elements if no data
                     document.querySelector('.progress-bar-container').style.display = 'none';
                     document.getElementById('contents-list-container').style.display = 'none';
                     resetQuizButton.style.display = 'none';
                 }

            }
        }


        // Start the quiz when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', initQuiz);

    </script>
</body>
</html>
